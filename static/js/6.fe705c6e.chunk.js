(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[6],{108:function(e,t,n){"use strict";function a(e){return{welcome:function(){e.setMessage({value:"\n        Bienvenido al mundo pokemon, todo parecido con el original es pura coincidencia. Ahora haz como que quieres salir de Pueblo Paleta\n        para empezar la historia.\n        "})}}}n.r(t),n.d(t,"getEvents",(function(){return a}))},111:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return l}));var a=n(115),r=n.n(a),i=n(7),o=r.a.createInstance({name:i.a.PLAYER,storeName:"index"});function l(e){return r.a.createInstance({name:"events",storeName:e})}},131:function(e,t,n){e.exports=n.p+"static/media/characters.52805807.png"},132:function(e,t,n){e.exports=n.p+"static/media/world.74af39e9.png"},133:function(e){e.exports=JSON.parse('{"columns":38,"editorsettings":{"export":{"format":"","target":"."}},"image":"../world.png","imageheight":656,"imagewidth":608,"margin":0,"name":"world","spacing":0,"tilecount":1558,"tiledversion":"1.3.3","tileheight":16,"tiles":[{"id":0,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":2,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":38,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":40,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":231,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":646,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":656,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":690,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":804,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":842,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":1064,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":1068,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":1069,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":1070,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":1102,"properties":[{"name":"collision","type":"bool","value":false}]}],"tilewidth":16,"type":"tileset","version":1.2}')},134:function(e,t,n){var a={"./":[108],"./PalletTown":[109,0],"./PalletTown/":[109,0],"./PalletTown/index":[109,0],"./PalletTown/index.js":[109,0],"./PalletTownRooms/laboratory":[116,1],"./PalletTownRooms/laboratory.js":[116,1],"./index":[108],"./index.js":[108]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=134,e.exports=r},135:function(e,t,n){var a={"./PalletTown.json":[136,7],"./PalletTownRooms.json":[137,8]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n.t(r,3)}))}r.keys=function(){return Object.keys(a)},r.id=135,e.exports=r},138:function(e,t,n){"use strict";n.r(t),n.d(t,"createGame",(function(){return Z}));var a=n(106),r=n.n(a),i=n(107),o=n(112),l=n(7),s=n(111),c=n(108),u=n(14),p=n(41),d=n(31),f=n(115),x=n.n(f),m=n(131),w=n.n(m),h=n(42),v="still",y="walk";function b(e,t,n,a,r){return g.apply(this,arguments)}function g(){return(g=Object(i.a)(r.a.mark((function e(t,n,a,i,s){var c,u,p,d,f,m,w,b,g,O,T,I,N,M,S,A,C,_,z;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S=function(){d.textures.stillDown=[d.spritesheet.textures["stillDown"+n]],d.textures.stillUp=[d.spritesheet.textures["stillUp"+n]],d.textures.stillLeft=[d.spritesheet.textures["stillLeft"+n]],d.textures.stillRight=[d.spritesheet.textures["stillRight"+n]],d.textures.walkDown=R(d.spritesheet,"walkDown"),d.textures.walkUp=R(d.spritesheet,"walkUp"),d.textures.walkLeft=R(d.spritesheet,"walkLeft"),d.textures.walkRight=R(d.spritesheet,"walkRight");var e=new o.a(d.textures[d.state+Object(h.b)(d.direction)]);d.sprite=e,e.width=l.c,e.height=l.c,e.animationSpeed=.1,e.x=i,e.y=s,a.addChild(e)},M=function(){var e=new o.g(U.characters.texture,D(n));d.spritesheet=e,e.parse((function(){S()}))},N=function(){if(d.sprite){var e=d.textures[d.state+Object(h.b)(d.direction)];e&&d.sprite.textures!==e&&(d.sprite.textures=e,d.sprite.play())}},I=function(){d.nextDirection&&(d.direction=d.nextDirection,d.nextDirection=null),d.nextState&&(d.state=d.nextState,d.nextState=null),t.world.tileAt(z.x/l.c,z.y/l.c,{character:d})},T=function(e,t){if(d.speed[e]){var n=d.speed[e]*l.d;z[e]%l.c||t?z[e]+=n:(d.speed[e]=0,d.updateState())}},O=function(e,t){var n=Math.floor(z.x/l.c+e),a=Math.floor(z.y/l.c+t),r=d.game.world.tileAt(n,a);d.nextTile={x:n,y:a,data:r}},g=function(){d.sprite.x=z.x,d.sprite.y=z.y},b=function(){var e,t,n=d.direction===l.b.RIGHT?1:d.direction===l.b.LEFT?-1:0,a=d.direction===l.b.DOWN?1:d.direction===l.b.UP?-1:0;d.speed.x||d.speed.y||O(n,a),A&&A.check()&&(A=null),d.state!==y||d.speed.x||d.speed.y||!1!==d.nextTile.data.collision||!1!==(null===(e=d.nextTile.data.character)||void 0===e?void 0:e.properties.visible)&&!0===(null===(t=d.nextTile.data.character)||void 0===t?void 0:t.collision)?d.speed.x||d.speed.y?T(d.speed.x?"x":"y"):I():(d.speed.x=n,d.speed.y=a,T(d.speed.x?"x":"y",!0)),N(),d.postUpdate()},w=function(e){m(e),d.nextState=y},m=function(e){d.nextDirection=e},f=function(e){d.nextState=v,e&&(d.nextDirection=e)},U||P){e.next=15;break}return e.next=14,k();case 14:P=e.sent;case 15:return p=x.a.createInstance({name:n,storeName:n!==l.a.PLAYER?t.world.location+t.world.layer:"index"}),e.t0=p,e.t1=t,e.t2=f,e.t3=m,e.t4=w,e.t5=I,e.t6=g,e.t7=function(){},e.t8=v,e.t9=l.b.DOWN,e.t10={x:0,y:0},e.t11=null===(c=E[n])||void 0===c?void 0:c.spritesheet,e.t12=(null===(u=E[n])||void 0===u?void 0:u.textures)||{stillDown:[],stillUp:[],stillLeft:[],stillRight:[],walkDown:[],walkUp:[],walkLeft:[],walkRight:[]},d={database:e.t0,game:e.t1,collision:!0,still:e.t2,face:e.t3,walk:e.t4,updateState:e.t5,get properties(){return _},set properties(e){Object.assign(_,e),p.setItem("properties",_),d.sprite.visible=!1!==_.visible},postUpdate:e.t6,onNextTileUpdate:e.t7,get event(){return A.promise},set event(e){A=L(e)},sprite:null,state:e.t8,direction:e.t9,speed:e.t10,nextDirection:null,nextState:null,get nextTile(){return C},set nextTile(e){C=e,d.onNextTileUpdate(e)},get position(){return z},set position(e){t.world.tileAt(z.x/l.c,z.y,{character:null}),C={data:{}},z.x=e.x,z.y=e.y},spritesheet:e.t11,textures:e.t12},A=null,C={data:{}},e.next=34,p.getItem("properties");case 34:if(e.t13=e.sent,e.t13){e.next=37;break}e.t13={};case 37:return _=e.t13,e.next=40,j(d,p,i,s);case 40:return z=e.sent,E[n]?S():M(),d.game.app.ticker.add(b),E[n]=d,e.abrupt("return",d);case 45:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return O.apply(this,arguments)}function O(){return(O=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){(new o.e).add("characters",w.a).load((function(t,n){U=n,e()}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t,n,a){return T.apply(this,arguments)}function T(){return(T=Object(i.a)(r.a.mark((function e(t,n,a,i){var o,s,c,u,d,f,x;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(){t.game.world.tileAt(x.x/l.c,x.y/l.c,{character:null})},e.next=3,n.getItem("position");case 3:return u=e.sent,d=null!==(o=null===u||void 0===u?void 0:u.x)&&void 0!==o?o:a,f=null!==(s=null===u||void 0===u?void 0:u.y)&&void 0!==s?s:i,x={get x(){return d},set x(e){d%l.c===0&&c(),(d=e)%l.c===0&&n.setItem("position",Object(p.a)({},x,{x:d}))},get y(){return f},set y(e){f%l.c===0&&c(),(f=e)%l.c===0&&n.setItem("position",Object(p.a)({},x,{y:f}))}},e.abrupt("return",x);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t){return e.data.animations[t].map((function(t){var n,a=e.textures[t];return a.rotate=null!==(n=e.data.frames[t].rotate)&&void 0!==n?n:a.rotate,a}))}function D(e){var t;return{meta:{},frames:(t={},Object(d.a)(t,"stillDown"+e,{frame:I(e)}),Object(d.a)(t,"stillUp"+e,{frame:I(e+1)}),Object(d.a)(t,"stillLeft"+e,{frame:I(e+2)}),Object(d.a)(t,"stillRight"+e,Object(d.a)({frame:I(e+2)},"rotate",o.i.MIRROR_HORIZONTAL)),Object(d.a)(t,"walkDown0"+e,{frame:I(e+3)}),Object(d.a)(t,"walkDown1"+e,Object(d.a)({frame:I(e+3)},"rotate",o.i.MIRROR_HORIZONTAL)),Object(d.a)(t,"walkUp0"+e,{frame:I(e+4)}),Object(d.a)(t,"walkUp1"+e,Object(d.a)({frame:I(e+4)},"rotate",o.i.MIRROR_HORIZONTAL)),Object(d.a)(t,"walkLeft"+e,{frame:I(e+5)}),Object(d.a)(t,"walkRight"+e,Object(d.a)({frame:I(e+5)},"rotate",o.i.MIRROR_HORIZONTAL)),t),animations:{walkDown:["walkDown0"+e,"stillDown"+e,"walkDown1"+e,"stillDown"+e],walkUp:["walkUp0"+e,"stillUp"+e,"walkUp1"+e,"stillUp"+e],walkLeft:["walkLeft"+e,"stillLeft"+e],walkRight:["walkRight"+e,"stillRight"+e]}}}function I(e){return{x:e%8*16,y:16*Math.floor(e/8),w:16,h:16}}function L(e){var t=null;return{check:function(){if(e())return t(),!0},promise:new Promise((function(e){t=e}))}}var U=null,P=null,E={};function N(e){return M.apply(this,arguments)}function M(){return(M=Object(i.a)(r.a.mark((function e(t){var n,a,i,o,s,c,p,d,f,x,m,w;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=function(){var e,a=n.nextTile.data.interact||(null===(e=n.nextTile.data.character)||void 0===e?void 0:e.properties.interact);a&&t.world.events[a]()},c=function(e){var n=e.data;n.event&&t.world.events[n.event]()},s=function(e){m(e);var a=n.nextTile.data;if(a.location||a.layer){var r=a.position.split(","),i=Object(u.a)(r,2),o=i[0],s=i[1];t.world.setLocation(a.location,a.layer,{x:o*l.c,y:s*l.c})}},o=function(e){n.direction!==e&&n.state!==y?i(e):d(e)},i=function(e){f(e),w=setTimeout((function(){return o(e)}),50)},a=function(e){x(e),clearTimeout(w)},e.next=8,b(t,l.a.PLAYER,t.app.stage,t.app.screen.width/2-l.c/2,t.app.screen.height/2-l.c/2);case 8:return n=e.sent,d=n.walk,f=n.face,x=n.still,m=n.updateState,n.interact=p,n.still=a,n.face=i,n.walk=o,n.updateState=s,n.postUpdate=function(){},n.onNextTileUpdate=c,w=null,e.abrupt("return",n);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=n(132),A=n.n(S),C=n(133);function _(e){return z.apply(this,arguments)}function z(){return(z=Object(i.a)(r.a.mark((function e(t){var a,c,u,d,f,x,m,w,h,v,y,g;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v=function(e){var t=e.item,n=e.tilesets,o=e.locationTiles,s=e.locationCharacters,c=e.locationMap,u=e.promises,d=a.data,f=d.tileSize,x=d.columns;t.objects.forEach(function(){var e=Object(i.a)(r.a.mark((function e(t){var i,d,m,w,h,v,y,g,k,O;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.gid,n[1]&&!(i<n[1].firstgid)){e.next=11;break}d=i-n[0].firstgid,m=d%x*f,w=Math.floor(d/x)*f,h=t.x/f,v=t.y/f-1,o["".concat(h,"-").concat(v)]=Object(p.a)({},a.data.tiles[d]||{},{},t.properties.reduce(F,{})),Y({texture:a.texture,map:c,tileX:m,tileY:w,x:h,y:v,tileSize:f}),e.next=20;break;case 11:return y=i-n[1].firstgid,g=b(a.game,y,c,l.c*t.x/f,l.c*(t.y/f-1)),u.push(g),k=t.properties?t.properties.reduce(F,{}):{},e.next=17,g;case 17:(O=e.sent).properties=Object(p.a)({},k,{},O.properties),s[y]=O;case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},h=function(e){var t=e.item,n=e.tilesets,r=e.locationTiles,i=e.locationMap,o=e.width,l=a.data,s=l.tileSize,c=l.columns;t.data.forEach((function(e,t){if(e){var l=parseInt(e,10)-n[0].firstgid,u=a.data.tiles[l]||{},p=t%o,d=Math.floor(t/o),f=l%c*s,x=Math.floor(l/c)*s;r["".concat(p,"-").concat(d)]=u,Y({texture:a.texture,map:i,tileX:f,tileY:x,x:p,y:d,tileSize:s})}}))},w=function(e,t,n){var r="".concat(e,"-").concat(t),i=a.tiles[y+g];return i?(i[r]||(i[r]={}),n&&(i[r]=Object(p.a)({},i[r],{},n)),i[r]):{}},m=function(){return(m=Object(i.a)(r.a.mark((function e(i){var l,s,c,u,p,d,f,x,m,w,y,b,g;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=n(134)("./".concat(a.location,"/").concat(a.layer)).catch((function(){return{}})),s=a.location,c=a.layer,u=a.map[s+c],p=a.characters[s+c],u){e.next=21;break}return d={},u=new o.c,p={},e.next=10,n(135)("./".concat(s,".json"));case 10:return f=e.sent,x=f.layers,m=f.tilesets,w=f.width,y=[],x.forEach((function(e){e.name===c&&("tilelayer"===e.type&&h({item:e,tilesets:m,locationTiles:d,locationMap:u,width:w}),"objectgroup"===e.type&&v({item:e,tilesets:m,locationTiles:d,locationCharacters:p,locationMap:u,promises:y}))})),e.next=18,Promise.all(y);case 18:a.map[s+c]=u,a.tiles[s+c]=d,a.characters[s+c]=p;case 21:return e.next=23,l;case 23:b=e.sent,g=b.getEvents,a.events=g?g(t):null,a.camera.removeChildren(),a.camera.addChild(u),a.game.characters=p,i&&(a.game.player.position=i);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)},x=function(e){return m.apply(this,arguments)},f=function(){return(f=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H();case 2:return t=e.sent,a.texture=t,a.data={tileSize:C.tilewidth,columns:C.columns,tiles:C.tiles.reduce((function(e,t){return e[t.id]=t.properties.reduce(F,{}),e}),{})},e.next=7,x();case 7:a.game.enableControls=!0;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)},d=function(){return f.apply(this,arguments)},u=function(e,t,n){a.location=e||a.location,a.layer=t||"index",s.b.setItem("location",a.location),s.b.setItem("layer",a.layer),x(n)},c=function(){var e,t,n=a.game.player.position;a.camera.pivot.x=-(null===(e=a.game.player.sprite)||void 0===e?void 0:e.x),a.camera.pivot.y=-(null===(t=a.game.player.sprite)||void 0===t?void 0:t.y),a.camera.position.x=-n.x,a.camera.position.y=-n.y},e.t0=t,e.t1=c,e.t2=w,e.t3=u,e.t4=d,e.t5={},e.t6={},e.t7={},e.t8=new o.c,a={game:e.t0,update:e.t1,tileAt:e.t2,setLocation:e.t3,load:e.t4,events:null,get location(){return y},set location(e){y=e,s.b.setItem("location",e)},get layer(){return g},set layer(e){g=e,s.b.setItem("layer",e)},texture:null,data:null,map:e.t5,tiles:e.t6,characters:e.t7,camera:e.t8},t.app.stage.addChildAt(a.camera,0),t.app.ticker.add(c,null,o.h.INTERACTION),y=null,g=null,e.abrupt("return",a);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return new Promise((function(e){(new o.e).add("world",A.a).load((function(t,n){e(n.world.texture)}))}))}function Y(e){var t=e.texture,n=e.map,a=e.tileX,r=e.tileY,i=e.x,s=e.y,c=e.tileSize,u=new o.d;u.beginTextureFill({texture:t}),u.drawRect(a,r,c,c),u.width=l.c,u.height=l.c,u.x=-a*u.scale.x+i*l.c,u.y=-r*u.scale.y+s*l.c,n.addChild(u)}function F(e,t){return e[t.name]=t.value,e}function Z(e){return G.apply(this,arguments)}function G(){return(G=Object(i.a)(r.a.mark((function e(t){var n,a,i,o,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){var t=e.detail;i.enableControls?(i.action=t,i.player.still(),i.action.forEach((function(e){switch(e){case l.b.UP:case l.b.LEFT:case l.b.RIGHT:case l.b.DOWN:i.player.walk(e);break;case l.b.A:i.player.interact()}}))):i.action=[]},n=t.view,a=t.setMessage,(i={setMessage:a,events:null,app:null,action:[],player:null,world:null,characters:{},enableControls:!1}).events=Object(c.getEvents)(i),e.next=6,s.b.getItem("position");case 6:return e.t0=e.sent,e.next=9,s.b.getItem("location");case 9:return e.t1=e.sent,e.next=12,s.b.getItem("layer");case 12:return e.t2=e.sent,u={position:e.t0,location:e.t1,layer:e.t2},e.next=16,J(i,n);case 16:u.position?(i.world.location=u.location,i.world.layer=u.layer):(i.events.welcome(),i.player.position={x:3*l.c,y:6*l.c},i.world.location="PalletTownRooms",i.world.layer="house1 f2"),i.world.load(),window.addEventListener("action",o);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){return W.apply(this,arguments)}function W(){return(W=Object(i.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.k.skipHello(),o.j.SCALE_MODE=o.f.NEAREST,t.app=new o.b({view:n,width:1920,height:1080}),t.app.renderer.plugins.accessibility.destroy(),delete t.app.renderer.plugins.accesibility,e.next=7,N(t);case 7:return t.player=e.sent,e.next=10,_(t);case 10:t.world=e.sent;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=6.fe705c6e.chunk.js.map