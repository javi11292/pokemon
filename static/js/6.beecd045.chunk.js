(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[6],{142:function(t,e,a){t.exports=a.p+"static/media/characters.111f6faf.png"},143:function(t,e,a){t.exports=a.p+"static/media/world.74af39e9.png"},144:function(t,e,a){t.exports=a.p+"static/media/world.db6fb586.xml"},145:function(t,e,a){var n={"./PalletTown":[123,9,0],"./PalletTown/":[123,9,0],"./PalletTown/index":[123,9,0],"./PalletTown/index.js":[123,9,0],"./welcome.txt":[89,7,1]};function r(t){if(!a.o(n,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=n[t],r=e[0];return a.e(e[2]).then((function(){return a.t(r,e[1])}))}r.keys=function(){return Object.keys(n)},r.id=145,t.exports=r},146:function(t,e,a){var n={"./PalletTown.xml":[147,7],"./PalletTownRooms.xml":[148,8]};function r(t){if(!a.o(n,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=n[t],r=e[0];return a.e(e[1]).then((function(){return a.t(r,7)}))}r.keys=function(){return Object.keys(n)},r.id=146,t.exports=r},149:function(t,e,a){"use strict";a.r(e),a.d(e,"createGame",(function(){return U}));var n=a(23),r=a.n(n),i=a(36),o=a(124),l=a(12),c=a(128),s=a.n(c),u=s.a.createInstance({name:"player"}),p=a(51),d=a(10),f=a(49),w=a(37),x={PLAYER:[6,14]};function m(t){return{x:t%8*16,y:16*Math.floor(t/8),w:16,h:16}}var h=a(142),y=a.n(h),v="still",b="walk";function g(t,e){return t.data.animations[e].map((function(e){var a,n=t.textures[e];return n.rotate=null!==(a=t.data.frames[e].rotate)&&void 0!==a?a:n.rotate,n}))}function k(t,e){var a=s.a.createInstance({name:e}),n=function(t){var e=0,a=0,n={get x(){return e},set x(a){e=a,t.setItem("position",Object(f.a)({},n,{x:e}))},get y(){return a},set y(e){a=e,t.setItem("position",Object(f.a)({},n,{y:a}))}};return n}(a),c={database:a,game:t,still:function(){c.nextState=v},face:u,walk:function(t){u(t),c.nextState=b},sprite:null,state:v,direction:l.a.DOWN,speed:{x:0,y:0},nextDirection:null,nextState:null,nextTile:{data:{}},get position(){return n},set position(t){n.x=t.x,n.y=t.y},textures:{stillDown:[],stillUp:[],stillLeft:[],stillRight:[],walkDown:[],walkUp:[],walkLeft:[],walkRight:[]}};function u(t){c.nextDirection=t}function h(t,e){if(c.speed[t]){var a=c.speed[t]*l.c;if(c.position[t]%l.b||e)c.position[t]+=a;else{c.speed[t]=0,k();var n=c.nextTile.data;if(n.location||n.layer){var r=n.position.split(","),i=Object(d.a)(r,2),o=i[0],s=i[1];c.game.world.setLocation(n.location,n.layer,{x:o*l.b,y:s*l.b})}}}}function k(){c.nextDirection&&(c.direction=c.nextDirection,c.nextDirection=null),c.nextState&&(c.state=c.nextState,c.nextState=null)}function O(){return(O=Object(i.a)(r.a.mark((function a(n,i){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.world.events[e]["".concat(n,"-").concat(i)](c.game);case 1:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return(new o.e).add("characters",y.a).load((function(t,a){var n=new o.g(a.characters.texture,function(t){var e=Object(d.a)(t,2),a=e[0],n=8*e[1]+a;return{meta:{},frames:{stillDown:{frame:m(n)},stillUp:{frame:m(n+1)},stillLeft:{frame:m(n+2)},stillRight:Object(w.a)({frame:m(n+2)},"rotate",o.h.MIRROR_HORIZONTAL),walkDown0:{frame:m(n+3)},walkDown1:Object(w.a)({frame:m(n+3)},"rotate",o.h.MIRROR_HORIZONTAL),walkUp0:{frame:m(n+4)},walkUp1:Object(w.a)({frame:m(n+4)},"rotate",o.h.MIRROR_HORIZONTAL),walkLeft:{frame:m(n+5)},walkRight:Object(w.a)({frame:m(n+5)},"rotate",o.h.MIRROR_HORIZONTAL)},animations:{walkDown:["walkDown0","stillDown","walkDown1","stillDown"],walkUp:["walkUp0","stillUp","walkUp1","stillUp"],walkLeft:["walkLeft","stillLeft"],walkRight:["walkRight","stillRight"]}}}(x[e.toUpperCase()]));n.parse((function(){c.textures.stillDown=[n.textures.stillDown],c.textures.stillUp=[n.textures.stillUp],c.textures.stillLeft=[n.textures.stillLeft],c.textures.stillRight=[n.textures.stillRight],c.textures.walkDown=g(n,"walkDown"),c.textures.walkUp=g(n,"walkUp"),c.textures.walkLeft=g(n,"walkLeft"),c.textures.walkRight=g(n,"walkRight");var t=new o.a(c.textures[c.state+Object(p.d)(c.direction)]);t.width=l.b,t.height=l.b,t.animationSpeed=.1,t.x=c.game.app.screen.width/2-t.width/2,t.y=c.game.app.screen.height/2-t.height/2,c.sprite=t,c.game.app.stage.addChild(t)}))})),c.game.app.ticker.add((function(){var t=c.direction===l.a.RIGHT?1:c.direction===l.a.LEFT?-1:0,a=c.direction===l.a.DOWN?1:c.direction===l.a.UP?-1:0;c.state!==b||c.speed.x||c.speed.y||function(t,a){var n=Math.floor(c.position.x/l.b+t),r=Math.floor(c.position.y/l.b+a);if(c.nextTile.x===n&&c.nextTile.y===r)return;var i=c.game.world.tileAt(n,r);c.nextTile={x:n,y:r,data:c.game.world.tileAt(n,r)},i.event===e&&function(t,e){O.apply(this,arguments)}(n,r)}(t,a),c.state!==b||c.speed.x||c.speed.y||"false"!==c.nextTile.data.collision?c.speed.x||c.speed.y?h(c.speed.x?"x":"y"):k():(c.speed.x=t,c.speed.y=a,h(c.speed.x?"x":"y",!0)),function(){if(!c.sprite)return;var t=c.textures[c.state+Object(p.d)(c.direction)];if(!t||c.sprite.textures===t)return;c.sprite.textures=t,c.sprite.play()}()})),c}var O=a(143),R=a.n(O),j=a(144),D=a.n(j);function T(){return new Promise((function(t){(new o.e).add("world",R.a).load((function(e,a){t(a.world.texture)}))}))}function L(t){var e=t.texture,a=t.map,n=t.tileX,r=t.tileY,i=t.x,c=t.y,s=t.object,u=t.tileSize,p=new o.d;p.name="".concat(i,"-").concat(c),p.data=s,p.beginTextureFill({texture:e}),p.drawRect(n,r,u,u),p.width=l.b,p.height=l.b,p.x=-n*p.scale.x+i*l.b,p.y=-r*p.scale.y+c*l.b,a.addChild(p)}function I(t,e){o.j.skipHello(),o.i.SCALE_MODE=o.f.NEAREST,t.app=new o.b({view:e,width:1920,height:1080}),t.app.renderer.plugins.accessibility.destroy(),delete t.app.renderer.plugins.accesibility,t.player=function(t){var e=k(t,"player"),a=e.walk,n=e.face,r=e.still;e.still=function(){r(),clearTimeout(i)},e.face=o,e.walk=l;var i=null;function o(t){n(t),i=setTimeout((function(){return l(t)}),50)}function l(t){e.direction!==t&&e.state!==b?o(t):a(t)}return e}(t),t.world=function(t){var e=null,n=null,l={game:t,update:c,tileAt:function(t,e){var a;return l.camera.children.length&&(null===(a=l.camera.getChildAt(0).getChildByName("".concat(t,"-").concat(e)))||void 0===a?void 0:a.data)||{}},setLocation:function(t,e,a){l.location=t||l.location,l.layer=e||"index",u.setItem("location",l.location),u.setItem("layer",l.layer),w(a)},load:function(){return s.apply(this,arguments)},events:null,get location(){return e},set location(t){e=t,u.setItem("location",t)},get layer(){return n},set layer(t){n=t,u.setItem("layer",t)},texture:null,data:null,map:{},camera:new o.c};function c(){var t,e,a=l.game.player.position;l.camera.pivot.x=-(null===(t=l.game.player.sprite)||void 0===t?void 0:t.x),l.camera.pivot.y=-(null===(e=l.game.player.sprite)||void 0===e?void 0:e.y),l.camera.position.x=-a.x,l.camera.position.y=-a.y}function s(){return(s=Object(i.a)(r.a.mark((function t(){var e,a,n,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([T(),Object(p.b)(D.a)]);case 2:return e=t.sent,a=Object(d.a)(e,2),n=a[0],i=a[1],l.texture=n,l.data=i,t.next=10,w();case 10:l.game.enableControls=!0;case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(t){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(r.a.mark((function t(e){var n,i,c,s,u,d,w,x,m,h,y,v,b,g;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=l.location,i=l.layer,c=l.map[n+i],s=a(145)("./".concat(l.location,"/").concat(l.layer)).catch((function(){return{}})),c){t.next=17;break}return c=new o.c,t.next=7,a(146)("./".concat(n,".xml"));case 7:return u=t.sent,d=u.default,t.next=11,Object(p.c)(d);case 11:w=t.sent,x=l.data,m=x.tileSize,h=x.columns,y=w[i],v=y.value,b=y.objects,v.trim().split("\n").forEach((function(t,e){return t.split(",").forEach((function(t,a){if(t&&"0"!==t){var n=parseInt(t,10)-1,r=l.data[n]||{},i=n%h*m,o=Math.floor(n/h)*m;L({texture:l.texture,map:c,tileX:i,tileY:o,x:a,y:e,tileSize:m,object:r})}}))})),b.forEach((function(t){var e=parseInt(t.id,10)-1,a=e%h*m,n=Math.floor(e/h)*m;L({texture:l.texture,map:c,tileX:a,tileY:n,x:t.x/m,y:t.y/m,tileSize:m,object:Object(f.a)({},l.data[e]||{},{},t)})})),l.map[n+i]=c;case 17:return t.next=19,s;case 19:g=t.sent,l.events=g,l.camera.removeChildren(),l.camera.addChild(c),e&&(l.game.player.position=e);case 24:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return t.app.stage.addChildAt(l.camera,0),t.app.ticker.add(c),l}(t)}function U(t){return E.apply(this,arguments)}function E(){return(E=Object(i.a)(r.a.mark((function t(e){var a,n,i,o,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=function(t){var e=t.detail;if(i.enableControls)switch(i.action=e,i.action){case l.a.UP:case l.a.LEFT:case l.a.RIGHT:case l.a.DOWN:i.player.walk(i.action);break;default:i.player.still()}},a=e.view,n=e.setMessage,i={setMessage:n,app:null,action:null,player:null,world:null,enableControls:!1},t.next=5,u.getItem("position");case 5:return t.t0=t.sent,t.next=8,u.getItem("location");case 8:return t.t1=t.sent,t.next=11,u.getItem("layer");case 11:t.t2=t.sent,o={position:t.t0,location:t.t1,layer:t.t2},I(i,a),o.position?(i.player.position=o.position,i.world.location=o.location,i.world.layer=o.layer):(Object(p.a)("welcome",n),i.player.position={x:3*l.b,y:7*l.b},i.world.location="PalletTownRooms",i.world.layer="house1 f2"),i.world.load(),window.addEventListener("action",c);case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=6.beecd045.chunk.js.map