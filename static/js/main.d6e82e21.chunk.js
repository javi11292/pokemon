(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{17:function(e,t,n){e.exports={root:"GamePad_root__1oxIu",container:"GamePad_container__zvHUl",button:"GamePad_button__2J88v"}},18:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c}));Object({NODE_ENV:"production",PUBLIC_URL:"/pokemon",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_HOST;var r=100,a=10,c={UP:"up",LEFT:"left",RIGHT:"right",DOWN:"down"}},31:function(e,t,n){e.exports={root:"Message_root__2vmLJ",box:"Message_box__2VCyS",message:"Message_message__1ryYb",scroller:"Message_scroller__NFETY",icon:"Message_icon__1gsPY",flash:"Message_flash__16Cg2"}},47:function(e,t,n){e.exports={root:"Main_root__18Ijz",canvas:"Main_canvas__3MHFI",title:"Main_title__1FHQL"}},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return b}));var r=n(36),a=n(49),c=n(48),o=n(9),i=n(24),u=n.n(i),s=n(37),l=new DOMParser;function f(e,t){return d.apply(this,arguments)}function d(){return(d=Object(s.a)(u.a.mark((function e(t,r){var a,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(85)("./".concat(t,".txt"));case 3:return a=e.sent,c=a.default,e.next=7,fetch(c).then((function(e){return e.text()}));case 7:return o=e.sent,r&&r(o),e.abrupt("return",o);case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=Object(s.a)(u.a.mark((function e(t){var n,r,a,i,s,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t).then((function(e){return e.text()}));case 3:return n=e.sent,r=Array.from(l.parseFromString(n,"application/xml").children),a=Object(o.a)(r,1),i=a[0],s=Object(c.a)(i.children),f=s.slice(1),e.abrupt("return",f.reduce((function(e,t){var n=Object(c.a)(t.children[0].children).slice(0);return e[t.id]=n.reduce((function(e,t){return e[t.getAttribute("name")]=t.getAttribute("value"),e}),{}),e}),{tileSize:i.getAttribute("tilewidth"),columns:i.getAttribute("columns")}));case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=Object(s.a)(u.a.mark((function e(t){var n,i,s,f,d,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t).then((function(e){return e.text()}));case 3:return n=e.sent,i=Array.from(l.parseFromString(n,"application/xml").children),s=Object(o.a)(i,1),f=s[0],d=Object(c.a)(f.children),m=d.slice(1),e.abrupt("return",m.reduce((function(e,t){var n=e[t.getAttribute("name")]||{};if("objectgroup"===t.nodeName){var c=Array.from(t.children).reduce((function(e,t){return e.push(Object(a.a)({id:t.getAttribute("gid"),x:t.getAttribute("x"),y:t.getAttribute("y")},Array.from(t.children[0].children).reduce((function(e,t){return e[t.getAttribute("name")]=t.getAttribute("value"),e}),{}))),e}),[]);Object.assign(n,{objects:c})}else Object.assign(n,{value:t.children[0].innerHTML});return Object(a.a)({},e,Object(r.a)({},t.getAttribute("name"),n))}),{}));case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e&&e[0].toUpperCase()+e.slice(1)}},72:function(e,t,n){e.exports=n(86)},85:function(e,t,n){var r={"./welcome.txt":[89,7]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n.t(a,7)}))}a.keys=function(){return Object.keys(r)},a.id=85,e.exports=a},86:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(8),o=n(9),i=n(66),u=n(117),s=n(111),l=n(112),f=n(118),d=n(113),m=n(114),v=n(115),p=n(116),h=n(119),b=n(64),g=n.n(b),E=n(65),w=n.n(E),O=n(120),j=n(109),y=n(58),_=n.n(y)()({notifications:{state:[],reducer:function(e,t){var n=t.action,r=t.value;switch(n){case"push":e.push(r);break;case"shift":e.shift();break;default:return}}},message:{state:"",reducer:function(e,t){return t}}});var x=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],c=_("notifications"),i=Object(o.a)(c,2),u=i[0],s=i[1];return Object(r.useEffect)((function(){a(u.length>0)}),[u]),{notification:u[0],handleClose:function(){a(!1)},handleExited:function(){s({action:"shift"})},open:n}};var N=function(){var e=x(),t=e.notification,n=e.handleClose,r=e.handleExited,c=e.open;return a.a.createElement(O.a,{open:c,onClose:n,onExited:r,autoHideDuration:2e3},a.a.createElement(j.a,{message:t}))},L=n(18),A=n(50);var P=function(){var e=Object(r.useState)(),t=Object(o.a)(e,2),n=t[0],a=t[1],c=_("message"),i=Object(o.a)(c,1)[0];function u(e){a(e),window.dispatchEvent(new CustomEvent("action",{detail:e}))}return Object(r.useEffect)((function(){function e(e){var n=document.elementFromPoint(e.x,e.y),r=null===n||void 0===n?void 0:n.dataset.action;r?u(r):t()}function t(){u(null)}var n=[["pointerdown",e],["pointermove",e],["pointerup",t]];return n.forEach((function(e){var t;return(t=window).addEventListener.apply(t,Object(A.a)(e))})),function(){return n.forEach((function(e){var t;return(t=window).removeEventListener.apply(t,Object(A.a)(e))}))}}),[]),{buttonPress:n,message:i}},S=n(17),T=n.n(S);function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var R=a.a.createElement("rect",{height:100,width:100}),M=a.a.createElement("path",{d:"M 0 99 L 40 140 L 60 140 L 100 99 Z"}),W=a.a.createElement("path",{d:"M 0 0 L 0 100 L 40 140 L 60 140 L 100 100 L 100 0 Z"}),H=function(e){var t=e.svgRef,n=e.title,r=C(e,["svgRef","title"]);return a.a.createElement("svg",k({viewBox:"-5 0 110 140",ref:t},r),n?a.a.createElement("title",null,n):null,R,M,W)},U=a.a.forwardRef((function(e,t){return a.a.createElement(H,k({svgRef:t},e))}));n.p;var D=function(){var e=P(),t=e.buttonPress;return!e.message&&a.a.createElement("div",{className:T.a.root},a.a.createElement("div",{className:T.a.container,style:{"--area":"top","--color":t===L.a.UP?"grey":"white"}},a.a.createElement(U,{"data-action":L.a.UP,className:T.a.button})),a.a.createElement("div",{className:T.a.container,style:{"--area":"left","--rotate":"270deg","--color":t===L.a.LEFT?"grey":"white"}},a.a.createElement(U,{"data-action":L.a.LEFT,className:T.a.button})),a.a.createElement("div",{className:T.a.container,style:{"--area":"right","--rotate":"90deg","--color":t===L.a.RIGHT?"grey":"white"}},a.a.createElement(U,{"data-action":L.a.RIGHT,className:T.a.button})),a.a.createElement("div",{className:T.a.container,style:{"--area":"bottom","--rotate":"180deg","--color":t===L.a.DOWN?"grey":"white"}},a.a.createElement(U,{"data-action":L.a.DOWN,className:T.a.button})))},I=n(88),F=n(63),G=n.n(F);var z=function(){var e=Object(r.useRef)(),t=_("message"),n=Object(o.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(0),u=Object(o.a)(i,2),s=u[0],l=u[1],f=Object(r.useState)(!1),d=Object(o.a)(f,2),m=d[0],v=d[1],p=Object(r.useRef)(!1);function h(){e.current?v(-e.current.offsetTop+e.current.clientHeight<e.current.scrollHeight):v(!1)}return Object(r.useEffect)((function(){function e(){m&&!p.current?(l((function(e){return e+1})),p.current=!0):m||c("")}return window.addEventListener("pointerdown",e),function(){return window.removeEventListener("pointerdown",e)}}),[c,m]),Object(r.useEffect)(h,[a]),{message:a,messageRef:e,scroll:s,hasScroll:m,handleTransition:function(){p.current=!1,h()}}},B=n(31),J=n.n(B);var K=function(){var e=z(),t=e.message,n=e.messageRef,r=e.scroll,c=e.handleTransition,o=e.hasScroll;return t&&a.a.createElement("div",{className:J.a.root},a.a.createElement(I.a,{className:J.a.box},a.a.createElement("div",{className:J.a.message},a.a.createElement("div",{ref:n,className:J.a.scroller,onTransitionEnd:c,style:{"--scroll":"".concat(4.5*-r,"rem")}},t)),o&&a.a.createElement(G.a,{className:J.a.icon})))};function Y(e){e.preventDefault()}var V=function(){var e=Object(r.useRef)(),t=_("message",!1);return Object(r.useEffect)((function(){if("ReactSnap"!==navigator.userAgent)return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,147)).then((function(n){return(0,n.createGame)({view:e.current,setMessage:t})})),window.addEventListener("contextmenu",Y),function(){return window.removeEventListener("contextmenu",Y)}}),[t]),{canvas:e}},Z=n(47),Q=n.n(Z);var $=a.a.memo((function(){var e=V().canvas;return a.a.createElement("div",{className:Q.a.root},a.a.createElement("div",{className:Q.a.title},"Pokemon"),a.a.createElement(N,null),a.a.createElement(D,null),a.a.createElement(K,null),a.a.createElement("canvas",{className:Q.a.canvas,ref:e}))})),q=n(51);var X=function(e){var t=Object(r.useState)(),n=Object(o.a)(t,2),a=n[0],c=n[1];return Object(r.useLayoutEffect)((function(){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)}),[e]),Object(r.useEffect)((function(){function e(e){var t=e.detail;c((function(){return function(){t.postMessage({type:"SKIP_WAITING"}),window.location.reload()}}))}return window.addEventListener("update",e),function(){return window.removeEventListener("update",e)}}),[]),{update:a,handleClose:function(e){e.currentTarget.dataset.confirm?a():c()}}},ee=/palettePrimary/,te=Object(i.a)({palette:{type:"dark",primary:g.a,secondary:w.a}}),ne=":root{".concat(function e(t,n){if(t&&"object"===typeof t)return Object.entries(t).reduce((function(t,r){var a=Object(o.a)(r,2),c=a[0],i=a[1],u=e(i,n?"".concat(n).concat(Object(q.d)(c)):c);return u?t+u:t}),"");if(ee.test(n))return"--".concat(n,":").concat(t,";")}(te),"}");var re=function(){var e=X(ne),t=e.update,n=e.handleClose;return a.a.createElement(u.b,{injectFirst:!0},a.a.createElement(s.a,{theme:te},a.a.createElement(l.a,null),a.a.createElement(f.a,{onClose:n,open:!!t},a.a.createElement(d.a,null,"Nueva versi\xf3n disponible"),a.a.createElement(m.a,null,a.a.createElement(v.a,null,'Pulsa "Actualizar" para aplicar los cambios')),a.a.createElement(p.a,null,a.a.createElement(h.a,{onClick:n,color:"secondary"},"Cancelar"),a.a.createElement(h.a,{onClick:n,"data-confirm":!0,color:"primary"},"Actualizar"))),a.a.createElement($,null)))},ae=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ce(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var oe=document.getElementById("root");if(oe.hasChildNodes()){var ie=Array.from(document.getElementsByTagName("style"));Object(c.hydrate)(a.a.createElement(re,null),oe,(function(){return ie.forEach((function(e){return e.remove()}))})),function(e){if("serviceWorker"in navigator){if(new URL("/pokemon",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/pokemon","/service-worker.js");ae?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ce(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ce(t,e)}))}}({onUpdate:function(e){window.dispatchEvent(new CustomEvent("update",{detail:e.waiting}))}})}else Object(c.render)(a.a.createElement(re,null),oe)}},[[72,1,2]]]);
//# sourceMappingURL=main.d6e82e21.chunk.js.map