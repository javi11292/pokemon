(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[6],{109:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return l}));var a=n(113),r=n.n(a),i=n(7),o=r.a.createInstance({name:i.a.PLAYER,storeName:"index"});function l(e){return r.a.createInstance({name:"events",storeName:e})}},129:function(e,t,n){e.exports=n.p+"static/media/characters.111f6faf.png"},130:function(e,t,n){e.exports=n.p+"static/media/world.74af39e9.png"},131:function(e){e.exports=JSON.parse('{"columns":38,"image":"../world.png","imageheight":656,"imagewidth":608,"margin":0,"name":"world","spacing":0,"tilecount":1558,"tiledversion":"1.3.3","tileheight":16,"tiles":[{"id":0,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":2,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":38,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":40,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":231,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":646,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":656,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":690,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":804,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":842,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":1064,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":1102,"properties":[{"name":"collision","type":"bool","value":false}]}],"tilewidth":16,"type":"tileset","version":1.2}')},132:function(e,t,n){var a={"./PalletTown":[107,9,0],"./PalletTown/":[107,9,0],"./PalletTown/index":[107,9,0],"./PalletTown/index.js":[107,9,0],"./welcome.txt":[77,7,1]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[2]).then((function(){return n.t(r,t[1])}))}r.keys=function(){return Object.keys(a)},r.id=132,e.exports=r},133:function(e,t,n){var a={"./PalletTown.json":[134,7],"./PalletTownRooms.json":[135,8]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n.t(r,3)}))}r.keys=function(){return Object.keys(a)},r.id=133,e.exports=r},136:function(e,t,n){"use strict";n.r(t),n.d(t,"createGame",(function(){return F}));var a=n(38),r=n.n(a),i=n(40),o=n(110),l=n(7),s=n(109),c=n(42),u=n(14),p=n(114),d=n(115),f=n(113),x=n.n(f),w=n(129),m=n.n(w),h="still",y="walk";function v(e,t,n,a,r){return b.apply(this,arguments)}function b(){return(b=Object(i.a)(r.a.mark((function e(t,n,a,i,s){var u,p,d,f,w,m,v,b,k,j,D,S,E,M,P,A,C,_,H;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P=function(){f.textures.stillDown=[f.spritesheet.textures["stillDown"+n]],f.textures.stillUp=[f.spritesheet.textures["stillUp"+n]],f.textures.stillLeft=[f.spritesheet.textures["stillLeft"+n]],f.textures.stillRight=[f.spritesheet.textures["stillRight"+n]],f.textures.walkDown=T(f.spritesheet,"walkDown"),f.textures.walkUp=T(f.spritesheet,"walkUp"),f.textures.walkLeft=T(f.spritesheet,"walkLeft"),f.textures.walkRight=T(f.spritesheet,"walkRight");var e=new o.a(f.textures[f.state+Object(c.b)(f.direction)]);f.sprite=e,e.width=l.c,e.height=l.c,e.animationSpeed=.1,e.x=i,e.y=s,a.addChild(e)},M=function(){var e=new o.g(L.characters.texture,R(n));f.spritesheet=e,e.parse((function(){P()}))},E=function(){if(f.sprite){var e=f.textures[f.state+Object(c.b)(f.direction)];e&&f.sprite.textures!==e&&(f.sprite.textures=e,f.sprite.play())}},S=function(){f.nextDirection&&(f.direction=f.nextDirection,f.nextDirection=null),f.nextState&&(f.state=f.nextState,f.nextState=null),t.world.tileAt(H.x/l.c,H.y/l.c,{character:f})},D=function(e,t){if(f.speed[e]){var n=f.speed[e]*l.d;H[e]%l.c||t?H[e]+=n:(f.speed[e]=0,f.updateState())}},j=function(e,t){var n=Math.floor(H.x/l.c+e),a=Math.floor(H.y/l.c+t);if(f.nextTile.x!==n||f.nextTile.y!==a){var r=f.game.world.tileAt(n,a);f.nextTile={x:n,y:a,data:r}}},k=function(){f.sprite.x=H.x,f.sprite.y=H.y},b=function(){var e,t,n=f.direction===l.b.RIGHT?1:f.direction===l.b.LEFT?-1:0,a=f.direction===l.b.DOWN?1:f.direction===l.b.UP?-1:0;f.state!==y||f.speed.x||f.speed.y||j(n,a),A&&A.check()&&(A=null),f.state!==y||f.speed.x||f.speed.y||!1!==f.nextTile.data.collision||!0===(null===(e=f.nextTile.data.character)||void 0===e?void 0:e.properties.visible)&&!0===(null===(t=f.nextTile.data.character)||void 0===t?void 0:t.collision)?f.speed.x||f.speed.y?D(f.speed.x?"x":"y"):S():(f.speed.x=n,f.speed.y=a,D(f.speed.x?"x":"y",!0)),E(),f.postUpdate()},v=function(e){m(e),f.nextState=y},m=function(e){f.nextDirection=e},w=function(e){f.nextState=h,e&&(f.nextDirection=e)},L||U){e.next=15;break}return e.next=14,g();case 14:U=e.sent;case 15:return d=x.a.createInstance({name:n,storeName:n!==l.a.PLAYER?t.world.location+t.world.layer:"index"}),e.t0=d,e.t1=t,e.t2=w,e.t3=m,e.t4=v,e.t5=S,e.t6=k,e.t7=function(){},e.t8=h,e.t9=l.b.DOWN,e.t10={x:0,y:0},e.t11=null===(u=N[n])||void 0===u?void 0:u.spritesheet,e.t12=(null===(p=N[n])||void 0===p?void 0:p.textures)||{stillDown:[],stillUp:[],stillLeft:[],stillRight:[],walkDown:[],walkUp:[],walkLeft:[],walkRight:[]},f={database:e.t0,game:e.t1,collision:!0,still:e.t2,face:e.t3,walk:e.t4,updateState:e.t5,get properties(){return _},set properties(e){Object.assign(_,e),d.setItem("properties",_),f.sprite.visible=!1!==_.visible},postUpdate:e.t6,onNextTileUpdate:e.t7,get event(){return A.promise},set event(e){A=I(e)},sprite:null,state:e.t8,direction:e.t9,speed:e.t10,nextDirection:null,nextState:null,get nextTile(){return C},set nextTile(e){C=e,f.onNextTileUpdate(e)},get position(){return H},set position(e){H.x%l.c===0&&H.y%l.c===0&&t.world.tileAt(H.x/l.c,H.y,{character:null}),H.x=e.x,H.y=e.y},spritesheet:e.t11,textures:e.t12},A=null,C={data:{}},e.next=34,d.getItem("properties");case 34:if(e.t13=e.sent,e.t13){e.next=37;break}e.t13={};case 37:return _=e.t13,e.next=40,O(f,d,i,s);case 40:return H=e.sent,N[n]?P():M(),f.game.app.ticker.add(b),N[n]=f,e.abrupt("return",f);case 45:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return k.apply(this,arguments)}function k(){return(k=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){(new o.e).add("characters",m.a).load((function(t,n){L=n,e()}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t,n,a){return j.apply(this,arguments)}function j(){return(j=Object(i.a)(r.a.mark((function e(t,n,a,i){var o,s,c,u,d,f,x;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(){t.game.world.tileAt(x.x/l.c,x.y/l.c,{character:null})},e.next=3,n.getItem("position");case 3:return u=e.sent,d=null!==(o=null===u||void 0===u?void 0:u.x)&&void 0!==o?o:a,f=null!==(s=null===u||void 0===u?void 0:u.y)&&void 0!==s?s:i,x={get x(){return d},set x(e){d%l.c===0&&c(),(d=e)%l.c===0&&n.setItem("position",Object(p.a)({},x,{x:d}))},get y(){return f},set y(e){f%l.c===0&&c(),(f=e)%l.c===0&&n.setItem("position",Object(p.a)({},x,{y:f}))}},e.abrupt("return",x);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){return e.data.animations[t].map((function(t){var n,a=e.textures[t];return a.rotate=null!==(n=e.data.frames[t].rotate)&&void 0!==n?n:a.rotate,a}))}function R(e){var t;return{meta:{},frames:(t={},Object(d.a)(t,"stillDown"+e,{frame:D(e)}),Object(d.a)(t,"stillUp"+e,{frame:D(e+1)}),Object(d.a)(t,"stillLeft"+e,{frame:D(e+2)}),Object(d.a)(t,"stillRight"+e,Object(d.a)({frame:D(e+2)},"rotate",o.i.MIRROR_HORIZONTAL)),Object(d.a)(t,"walkDown0"+e,{frame:D(e+3)}),Object(d.a)(t,"walkDown1"+e,Object(d.a)({frame:D(e+3)},"rotate",o.i.MIRROR_HORIZONTAL)),Object(d.a)(t,"walkUp0"+e,{frame:D(e+4)}),Object(d.a)(t,"walkUp1"+e,Object(d.a)({frame:D(e+4)},"rotate",o.i.MIRROR_HORIZONTAL)),Object(d.a)(t,"walkLeft"+e,{frame:D(e+5)}),Object(d.a)(t,"walkRight"+e,Object(d.a)({frame:D(e+5)},"rotate",o.i.MIRROR_HORIZONTAL)),t),animations:{walkDown:["walkDown0"+e,"stillDown"+e,"walkDown1"+e,"stillDown"+e],walkUp:["walkUp0"+e,"stillUp"+e,"walkUp1"+e,"stillUp"+e],walkLeft:["walkLeft"+e,"stillLeft"+e],walkRight:["walkRight"+e,"stillRight"+e]}}}function D(e){return{x:e%8*16,y:16*Math.floor(e/8),w:16,h:16}}function I(e){var t=null;return{check:function(){if(e())return t(),!0},promise:new Promise((function(e){t=e}))}}var L=null,U=null,N={};function S(e){return E.apply(this,arguments)}function E(){return(E=Object(i.a)(r.a.mark((function e(t){var n,a,i,o,s,c,p,d,f,x,w;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(e){var n=e.data;n.event&&t.world.events[n.event]()},s=function(e){x(e);var a=n.nextTile.data;if(a.location||a.layer){var r=a.position.split(","),i=Object(u.a)(r,2),o=i[0],s=i[1];t.world.setLocation(a.location,a.layer,{x:o*l.c,y:s*l.c})}},o=function(e){n.direction!==e&&n.state!==y?i(e):p(e)},i=function(e){d(e),w=setTimeout((function(){return o(e)}),50)},a=function(e){f(e),clearTimeout(w)},e.next=7,v(t,l.a.PLAYER,t.app.stage,t.app.screen.width/2-l.c/2,t.app.screen.height/2-l.c/2);case 7:return n=e.sent,p=n.walk,d=n.face,f=n.still,x=n.updateState,n.still=a,n.face=i,n.walk=o,n.updateState=s,n.postUpdate=function(){},n.onNextTileUpdate=c,w=null,e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M=n(130),P=n.n(M),A=n(131);function C(e){return _.apply(this,arguments)}function _(){return(_=Object(i.a)(r.a.mark((function e(t){var a,c,u,d,f,x,w,m,h,y,b,g;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y=function(e){var t=e.item,n=e.tilesets,o=e.locationTiles,s=e.locationCharacters,c=e.locationMap,u=e.promises,d=a.data,f=d.tileSize,x=d.columns;t.objects.forEach(function(){var e=Object(i.a)(r.a.mark((function e(t){var i,d,w,m,h,y,b,g,k,O;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.gid,n[1]&&!(i<n[1].firstgid)){e.next=11;break}d=i-n[0].firstgid,w=d%x*f,m=Math.floor(d/x)*f,h=t.x/f,y=t.y/f-1,o["".concat(h,"-").concat(y)]=Object(p.a)({},a.data.tiles[d]||{},{},t.properties.reduce(Y,{})),z({texture:a.texture,map:c,tileX:w,tileY:m,x:h,y:y,tileSize:f}),e.next=20;break;case 11:return b=i-n[1].firstgid,g=v(a.game,b,c,l.c*t.x/f,l.c*(t.y/f-1)),u.push(g),k=t.properties?t.properties.reduce(Y,{}):{},e.next=17,g;case 17:(O=e.sent).properties=Object(p.a)({},k,{},O.properties),s[b]=O;case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},h=function(e){var t=e.item,n=e.tilesets,r=e.locationTiles,i=e.locationMap,o=e.width,l=a.data,s=l.tileSize,c=l.columns;t.data.forEach((function(e,t){if(e){var l=parseInt(e,10)-n[0].firstgid,u=a.data.tiles[l]||{},p=t%o,d=Math.floor(t/o),f=l%c*s,x=Math.floor(l/c)*s;r["".concat(p,"-").concat(d)]=u,z({texture:a.texture,map:i,tileX:f,tileY:x,x:p,y:d,tileSize:s})}}))},m=function(e,t,n){var r="".concat(e,"-").concat(t),i=a.tiles[b+g];return i?(n&&(i[r]?i[r]=Object(p.a)({},i[r],{},n):i[r]=n),i[r]||{}):{}},w=function(){return(w=Object(i.a)(r.a.mark((function e(i){var l,s,c,u,p,d,f,x,w,m,v,b,g;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=n(132)("./".concat(a.location,"/").concat(a.layer)).catch((function(){return{}})),s=a.location,c=a.layer,u=a.map[s+c],p=a.characters[s+c],u){e.next=21;break}return d={},u=new o.c,p={},e.next=10,n(133)("./".concat(s,".json"));case 10:return f=e.sent,x=f.layers,w=f.tilesets,m=f.width,v=[],x.forEach((function(e){e.name===c&&("tilelayer"===e.type&&h({item:e,tilesets:w,locationTiles:d,locationMap:u,width:m}),"objectgroup"===e.type&&y({item:e,tilesets:w,locationTiles:d,locationCharacters:p,locationMap:u,promises:v}))})),e.next=18,Promise.all(v);case 18:a.map[s+c]=u,a.tiles[s+c]=d,a.characters[s+c]=p;case 21:return e.next=23,l;case 23:b=e.sent,g=b.getEvents,a.events=g?g(t):null,a.camera.removeChildren(),a.camera.addChild(u),a.game.characters=p,i&&(a.game.player.position=i);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)},x=function(e){return w.apply(this,arguments)},f=function(){return(f=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H();case 2:return t=e.sent,a.texture=t,a.data={tileSize:A.tilewidth,columns:A.columns,tiles:A.tiles.reduce((function(e,t){return e[t.id]=t.properties.reduce(Y,{}),e}),{})},e.next=7,x();case 7:a.game.enableControls=!0;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)},d=function(){return f.apply(this,arguments)},u=function(e,t,n){a.location=e||a.location,a.layer=t||"index",s.b.setItem("location",a.location),s.b.setItem("layer",a.layer),x(n)},c=function(){var e,t,n=a.game.player.position;a.camera.pivot.x=-(null===(e=a.game.player.sprite)||void 0===e?void 0:e.x),a.camera.pivot.y=-(null===(t=a.game.player.sprite)||void 0===t?void 0:t.y),a.camera.position.x=-n.x,a.camera.position.y=-n.y},e.t0=t,e.t1=c,e.t2=m,e.t3=u,e.t4=d,e.t5={},e.t6={},e.t7={},e.t8=new o.c,a={game:e.t0,update:e.t1,tileAt:e.t2,setLocation:e.t3,load:e.t4,events:null,get location(){return b},set location(e){b=e,s.b.setItem("location",e)},get layer(){return g},set layer(e){g=e,s.b.setItem("layer",e)},texture:null,data:null,map:e.t5,tiles:e.t6,characters:e.t7,camera:e.t8},t.app.stage.addChildAt(a.camera,0),t.app.ticker.add(c,null,o.h.INTERACTION),b=null,g=null,e.abrupt("return",a);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return new Promise((function(e){(new o.e).add("world",P.a).load((function(t,n){e(n.world.texture)}))}))}function z(e){var t=e.texture,n=e.map,a=e.tileX,r=e.tileY,i=e.x,s=e.y,c=e.tileSize,u=new o.d;u.beginTextureFill({texture:t}),u.drawRect(a,r,c,c),u.width=l.c,u.height=l.c,u.x=-a*u.scale.x+i*l.c,u.y=-r*u.scale.y+s*l.c,n.addChild(u)}function Y(e,t){return e[t.name]=t.value,e}function F(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(i.a)(r.a.mark((function e(t){var n,a,i,o,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){var t=e.detail;if(i.enableControls)switch(i.action=t,i.action){case l.b.UP:case l.b.LEFT:case l.b.RIGHT:case l.b.DOWN:i.player.walk(i.action);break;default:i.player.still()}else i.action=null},n=t.view,a=t.setMessage,i={setMessage:a,app:null,action:null,player:null,world:null,characters:{},enableControls:!1},e.next=5,s.b.getItem("position");case 5:return e.t0=e.sent,e.next=8,s.b.getItem("location");case 8:return e.t1=e.sent,e.next=11,s.b.getItem("layer");case 11:return e.t2=e.sent,u={position:e.t0,location:e.t1,layer:e.t2},e.next=15,G(i,n);case 15:u.position?(i.world.location=u.location,i.world.layer=u.layer):(Object(c.a)("welcome",a),i.player.position={x:3*l.c,y:6*l.c},i.world.location="PalletTownRooms",i.world.layer="house1 f2"),i.world.load(),window.addEventListener("action",o);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e,t){return J.apply(this,arguments)}function J(){return(J=Object(i.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.k.skipHello(),o.j.SCALE_MODE=o.f.NEAREST,t.app=new o.b({view:n,width:1920,height:1080}),t.app.renderer.plugins.accessibility.destroy(),delete t.app.renderer.plugins.accesibility,e.next=7,S(t);case 7:return t.player=e.sent,e.next=10,C(t);case 10:t.world=e.sent;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=6.37e5751e.chunk.js.map