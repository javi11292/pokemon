(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[4],{121:function(t,e,i){t.exports=i.p+"static/media/characters.111f6faf.png"},125:function(t,e,i){t.exports=i.p+"static/media/world.74af39e9.png"},126:function(t,e,i){var a={"./PalletTown.txt":[127,5]};function n(t){if(!i.o(a,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=a[t],n=e[0];return i.e(e[1]).then((function(){return i.t(n,7)}))}n.keys=function(){return Object.keys(a)},n.id=126,t.exports=n},128:function(t,e,i){"use strict";i.r(e),i.d(e,"Game",(function(){return L}));var a=i(104),n=i(103),s=i(16),o={meta:{},frames:{stillDown:{frame:{x:96,y:224,w:16,h:16}},walkDown0:{frame:{x:16,y:240,w:16,h:16}},walkDown1:{frame:{x:16,y:240,w:16,h:16},rotate:n.h.MIRROR_HORIZONTAL},stillUp:{frame:{x:112,y:224,w:16,h:16}},walkUp0:{frame:{x:32,y:240,w:16,h:16}},walkUp1:{frame:{x:32,y:240,w:16,h:16},rotate:n.h.MIRROR_HORIZONTAL},stillLeft:{frame:{x:0,y:240,w:16,h:16}},walkLeft:{frame:{x:48,y:240,w:16,h:16}},stillRight:{frame:{x:0,y:240,w:16,h:16},rotate:n.h.MIRROR_HORIZONTAL},walkRight:{frame:{x:48,y:240,w:16,h:16},rotate:n.h.MIRROR_HORIZONTAL}},animations:{walkDown:["walkDown0","stillDown","walkDown1","stillDown"],walkUp:["walkUp0","stillUp","walkUp1","stillUp"],walkLeft:["walkLeft","stillLeft"],walkRight:["walkRight","stillRight"]}},l=i(121),r=i.n(l),c=i(43);function h(t){t.sprite&&(t.sprite.textures=t.textures[t.state+Object(c.a)(t.direction)],t.sprite.play())}function p(t,e){return t.data.animations[e].map((function(e){var i,a=t.textures[e];return a.rotate=null!==(i=t.data.frames[e].rotate)&&void 0!==i?i:a.rotate,a}))}var u=function t(e){var i,l=this;Object(a.a)(this,t),this.updatePosition=function(t,e){if(l.speed[t]){var i=l.speed[t]*s.c,a=Math.abs(l.position[t]%s.b),n=a&&(1===l.speed[t]?a:s.b-a);if(a){var o=l.position[t]<=0?n:s.b-n;l.position[t]+=o>=s.c?i:o*l.speed[t]}else e?l.position[t]+=i:l.speed[t]=0}},this.hasWorldCollision=function(t,e){var i=l.position.x/s.b+t,a=l.position.y/s.b+e,n=Math.floor(i),o=Math.floor(a);return i!==n||a!==o||l.collision&&n===l.collision.x&&o===l.collision.y||(l.game.world.hasCollision(n,o)?l.collision={x:n,y:o}:l.collision=null),!!l.collision},this.still=function(){l.updatePosition(l.speed.x?"x":"y"),l.speed.x||l.speed.y||l.state===t.STATES.STILL||(l.state=t.STATES.STILL,h(l))},this.walk=function(e){var i=e===s.a.RIGHT?1:e===s.a.LEFT?-1:0,a=e===s.a.DOWN?1:e===s.a.UP?-1:0;!l.speed.x&&!l.speed.y||l.direction===e?(l.hasWorldCollision(i,a)||(l.speed.x||l.speed.y||(l.speed.x=i,l.speed.y=a),l.updatePosition(l.speed.x?"x":"y",!0)),l.state===t.STATES.WALK&&l.direction===e||(l.state=t.STATES.WALK,l.direction=e,h(l))):l.updatePosition(l.speed.x?"x":"y")},this.game=e,this.app=e.app,this.sprite=null,this.state=null,this.direction=s.a.DOWN,this.position={x:10*s.b,y:3*s.b},this.speed={x:0,y:0},this.collision=null,this.textures={stillDown:[],stillUp:[],stillLeft:[],stillRight:[],walkDown:[],walkUp:[],walkLeft:[],walkRight:[]},i=this,(new n.e).add("characters",r.a).load((function(t,e){var a=new n.g(e.characters.texture,o);a.parse((function(){i.textures.stillDown=[a.textures.stillDown],i.textures.stillUp=[a.textures.stillUp],i.textures.stillLeft=[a.textures.stillLeft],i.textures.stillRight=[a.textures.stillRight],i.textures.walkDown=p(a,"walkDown"),i.textures.walkUp=p(a,"walkUp"),i.textures.walkLeft=p(a,"walkLeft"),i.textures.walkRight=p(a,"walkRight");var t=new n.a(i.textures["still".concat(Object(c.a)(i.direction))]);t.width=s.b,t.height=s.b,t.animationSpeed=.1,t.x=i.app.screen.width/2-t.width/2,t.y=i.app.screen.height/2-t.height/2,i.sprite=t,i.app.stage.addChild(t)}))}))};u.STATES={STILL:"still",WALK:"walk"};var w=i(122),d=i.n(w),f=i(124),x={0:{name:"dirt",x:0,y:0,w:16,h:16},1:{name:"grass",x:32,y:16,w:16,h:16},2:{name:"wall",x:96,y:0,w:16,h:16,collision:!0},3:{name:"dirt2",x:0,y:16,w:16,h:16}},m=i(125),y=i.n(m);function k(){return(k=Object(f.a)(d.a.mark((function t(e){var a,o,l,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.map[e.location]){t.next=12;break}return t.next=4,i(126)("./".concat(e.location,".txt"));case 4:return o=t.sent,l=o.default,t.next=8,fetch(l).then((function(t){return t.text()}));case 8:r=t.sent,a=new n.c,r.split("\n").forEach((function(t,i){return t.split(" ").forEach((function(t,o){var l=x[t];if(l){var r=new n.d;r.name="".concat(i,"-").concat(o),r.collision=l.collision,r.beginTextureFill({texture:e.texture}),r.drawRect(l.x,l.y,l.w,l.h),r.width=s.b,r.height=s.b,r.x=-l.x*r.scale.x+o*s.b,r.y=-l.y*r.scale.y+i*s.b,a.addChild(r)}}))})),e.map[e.location]=a;case 12:e.camera.removeChildren(),e.camera.addChild(a);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var v=function t(e){var i,s=this;Object(a.a)(this,t),this.updatePosition=function(t){var e,i;s.camera.pivot.x=-(null===(e=s.game.player.sprite)||void 0===e?void 0:e.x),s.camera.pivot.y=-(null===(i=s.game.player.sprite)||void 0===i?void 0:i.y),s.camera.position.x=-t.x,s.camera.position.y=-t.y},this.setLocation=function(t){s.location=t,function(t){k.apply(this,arguments)}(s)},this.hasCollision=function(t,e){var i=s.camera.getChildAt(0).getChildByName("".concat(e,"-").concat(t));return!i||i.collision},this.game=e,this.location=null,this.texture=null,this.map={},this.camera=new n.c,i=this,(new n.e).add("world",y.a).load((function(t,e){i.texture=e.world.texture,i.setLocation("PalletTown")})),e.app.stage.addChildAt(this.camera,0)},L=function t(e){var i=this;Object(a.a)(this,t),this.handleAction=function(t){var e=t.detail;i.action=e},n.j.skipHello(),n.i.SCALE_MODE=n.f.NEAREST,this.app=new n.b({view:e,width:1920,height:1080}),this.action=null,this.player=new u(this),this.world=new v(this),window.addEventListener("action",this.handleAction),this.app.ticker.add((function(){switch(i.action){case s.a.UP:case s.a.LEFT:case s.a.RIGHT:case s.a.DOWN:i.player.walk(i.action);break;default:i.player.still()}i.world.updatePosition(i.player.position)}))}}}]);