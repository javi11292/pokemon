(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[2],{26:function(e,t,n){e.exports={root:"Message_root__2vmLJ",box:"Message_box__2VCyS",message:"Message_message__1ryYb",scroller:"Message_scroller__NFETY",icon:"Message_icon__1gsPY",flash:"Message_flash__16Cg2"}},38:function(e,t,n){e.exports={root:"Main_root__18Ijz",canvas:"Main_canvas__3MHFI",title:"Main_title__1FHQL"}},42:function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e&&e[0].toUpperCase()+e.slice(1)}function r(e){return function(t){return new Promise((function(n){e.setMessage({value:t,callback:n})}))}}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}))},6:function(e,t,n){e.exports={pad:"GamePad_pad__3Gh-Z",container:"GamePad_container__zvHUl",button:"GamePad_button__2J88v",corner:"GamePad_corner__2H34g",triangle:"GamePad_triangle__2cA6W",actions:"GamePad_actions__3-QHp"}},62:function(e,t,n){e.exports=n(74)},7:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o}));var a=100,r=10,c={UP:"up",LEFT:"left",RIGHT:"right",DOWN:"down",A:"a",B:"b"},o={PLAYER:0,OAK:21}},74:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),o=n(14),l=n(103),i=n(96),s=n(97),u=n(102),f=n(98),m=n(99),d=n(100),v=n(101),b=n(104),g=n(54),p=n(52),E=n.n(p),y=n(53),h=n.n(y),w=n(7),O=n(39),j=n(56),_=n(55),N=n(31),L=n(41),P=n(46),R=n.n(P)()({message:{state:{value:""},reducer:function(e,t){return"function"===typeof t?t(e):t}}});var k=function(){var e=Object(a.useState)({}),t=Object(o.a)(e,2),n=t[0],r=t[1],c=R("message"),l=Object(o.a)(c,1)[0];return Object(a.useEffect)((function(){function e(e){var n=document.elementFromPoint(e.x,e.y),a=null===n||void 0===n?void 0:n.parentElement.dataset.action;a?r((function(t){return Object(L.a)({},t,Object(N.a)({},e.pointerId,a))})):t(e)}function t(e){r((function(t){var n=e.pointerId;t[n];return Object(j.a)(t,[n].map(_.a))}))}var n=[["pointerdown",e],["pointermove",e],["pointerup",t]];return n.forEach((function(e){var t;return(t=window).addEventListener.apply(t,Object(O.a)(e))})),function(){return n.forEach((function(e){var t;return(t=window).removeEventListener.apply(t,Object(O.a)(e))}))}}),[]),Object(a.useEffect)((function(){l.value&&r({})}),[l.value]),Object(a.useEffect)((function(){window.dispatchEvent(new CustomEvent("action",{detail:Object.values(n)}))}),[n]),{buttonPress:Object.values(n),message:l.value}},x=n(6),T=n.n(x);function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function M(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var A=r.a.createElement("path",{d:"M 0 0 L 0 100 L 40 140 L 60 140 L 100 100 L 100 0 Z"}),C=r.a.createElement("path",{d:"M -6 0 L -6 100 L 40 140 L 60 140 L 106 100 L 106 0 Z"}),I=function(e){var t=e.svgRef,n=e.title,a=M(e,["svgRef","title"]);return r.a.createElement("svg",S({viewBox:"-5 0 110 140",ref:t},a),n?r.a.createElement("title",null,n):null,A,C)},W=r.a.forwardRef((function(e,t){return r.a.createElement(I,S({svgRef:t},e))}));n.p;function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function H(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var F=r.a.createElement("path",{d:"M 0 0 L 0 100 L 100 100 Z"}),U=function(e){var t=e.svgRef,n=e.title,a=H(e,["svgRef","title"]);return r.a.createElement("svg",G({viewBox:"0 0 100 100",ref:t},a),n?r.a.createElement("title",null,n):null,F)},B=r.a.forwardRef((function(e,t){return r.a.createElement(U,G({svgRef:t},e))}));n.p;function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function z(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var J=r.a.createElement("circle",{cx:50,cy:50,r:50}),Y=function(e){var t=e.svgRef,n=e.title,a=z(e,["svgRef","title"]);return r.a.createElement("svg",D({viewBox:"0 0 100 100",ref:t},a),n?r.a.createElement("title",null,n):null,J)},Z=r.a.forwardRef((function(e,t){return r.a.createElement(Y,D({svgRef:t},e))}));n.p;var K=function(){var e=k(),t=e.buttonPress;return!e.message&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:T.a.pad},r.a.createElement("div",{className:T.a.corner,style:{"--area":"topLeft"}},r.a.createElement(B,{"data-action":w.b.UP,className:T.a.triangle,style:{"--rotate":"180deg"}}),r.a.createElement(B,{"data-action":w.b.LEFT,className:T.a.triangle})),r.a.createElement("div",{className:T.a.corner,style:{"--area":"topRight"}},r.a.createElement(B,{"data-action":w.b.RIGHT,className:T.a.triangle,style:{"--rotate":"270deg"}}),r.a.createElement(B,{"data-action":w.b.UP,className:T.a.triangle,style:{"--rotate":"90deg"}})),r.a.createElement("div",{className:T.a.corner,style:{"--area":"bottomLeft"}},r.a.createElement(B,{"data-action":w.b.DOWN,className:T.a.triangle,style:{"--rotate":"270deg"}}),r.a.createElement(B,{"data-action":w.b.LEFT,className:T.a.triangle,style:{"--rotate":"90deg"}})),r.a.createElement("div",{className:T.a.corner,style:{"--area":"bottomRight"}},r.a.createElement(B,{"data-action":w.b.RIGHT,className:T.a.triangle,style:{"--rotate":"180deg"}}),r.a.createElement(B,{"data-action":w.b.DOWN,className:T.a.triangle})),r.a.createElement("div",{className:T.a.container,style:{"--area":"top","--color":t.includes(w.b.UP)?"grey":"white"}},r.a.createElement(W,{"data-action":w.b.UP,className:T.a.button})),r.a.createElement("div",{className:T.a.container,style:{"--area":"left","--rotate":"270deg","--color":t.includes(w.b.LEFT)?"grey":"white"}},r.a.createElement(W,{"data-action":w.b.LEFT,className:T.a.button})),r.a.createElement("div",{className:T.a.container,style:{"--area":"right","--rotate":"90deg","--color":t.includes(w.b.RIGHT)?"grey":"white"}},r.a.createElement(W,{"data-action":w.b.RIGHT,className:T.a.button})),r.a.createElement("div",{className:T.a.container,style:{"--area":"bottom","--rotate":"180deg","--color":t.includes(w.b.DOWN)?"grey":"white"}},r.a.createElement(W,{"data-action":w.b.DOWN,className:T.a.button}))),r.a.createElement("div",{className:T.a.actions},r.a.createElement("div",{style:{"--area":"top","--color":t.includes(w.b.B)?"grey":"white"}},r.a.createElement(Z,{"data-action":w.b.B,className:T.a.button})),r.a.createElement("div",{style:{"--area":"top","--color":t.includes(w.b.A)?"grey":"white"}},r.a.createElement(Z,{"data-action":w.b.A,className:T.a.button}))))},Q=n(93),V=n(51),$=n.n(V);var q=function(){var e=Object(a.useRef)(),t=R("message"),n=Object(o.a)(t,2),r=n[0],c=n[1],l=Object(a.useState)(0),i=Object(o.a)(l,2),s=i[0],u=i[1],f=Object(a.useState)(!1),m=Object(o.a)(f,2),d=m[0],v=m[1],b=Object(a.useRef)(!1);function g(){e.current?v(-e.current.offsetTop+e.current.clientHeight<e.current.scrollHeight):v(!1)}return Object(a.useEffect)((function(){if(r.value)return window.addEventListener("pointerdown",e),function(){return window.removeEventListener("pointerdown",e)};function e(){d&&!b.current?(u((function(e){return e+1})),b.current=!0):d||(c({value:""}),r.callback&&r.callback())}}),[c,d,r]),Object(a.useEffect)((function(){u(0),g()}),[r.value]),{message:r.value,messageRef:e,scroll:s,hasScroll:d,handleTransition:function(){b.current=!1,g()}}},X=n(26),ee=n.n(X);var te=function(){var e=q(),t=e.message,n=e.messageRef,a=e.scroll,c=e.handleTransition,o=e.hasScroll;return t&&r.a.createElement("div",{className:ee.a.root},r.a.createElement(Q.a,{className:ee.a.box},r.a.createElement("div",{className:ee.a.message},r.a.createElement("div",{ref:n,className:ee.a.scroller,onTransitionEnd:c,style:{"--scroll":"".concat(4.5*-a,"rem")}},t)),o&&r.a.createElement($.a,{className:ee.a.icon})))};function ne(e){e.preventDefault()}var ae=function(){var e=Object(a.useRef)(),t=R("message",!1);return Object(a.useEffect)((function(){if("ReactSnap"!==navigator.userAgent)return Promise.all([n.e(5),n.e(6)]).then(n.bind(null,138)).then((function(n){return(0,n.createGame)({view:e.current,setMessage:t})})),window.addEventListener("contextmenu",ne),function(){return window.removeEventListener("contextmenu",ne)}}),[t]),{canvas:e}},re=n(38),ce=n.n(re);var oe=r.a.memo((function(){var e=ae().canvas;return r.a.createElement("div",{className:ce.a.root},r.a.createElement("div",{className:ce.a.title},"Pokemon"),r.a.createElement(K,null),r.a.createElement(te,null),r.a.createElement("canvas",{className:ce.a.canvas,ref:e}))})),le=n(42);var ie=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),r=n[0],c=n[1];return Object(a.useLayoutEffect)((function(){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)}),[e]),Object(a.useEffect)((function(){function e(e){var t=e.detail;c((function(){return function(){t.postMessage({type:"SKIP_WAITING"}),window.location.reload()}}))}return window.addEventListener("update",e),function(){return window.removeEventListener("update",e)}}),[]),{update:r,handleClose:function(e){e.currentTarget.dataset.confirm?r():c()}}},se=/palettePrimary/;var ue=Object(g.a)({palette:{type:"dark",primary:E.a,secondary:h.a}}),fe=":root{".concat(function e(t,n){return t&&"object"===typeof t?Object.entries(t).reduce((function(t,a){var r=Object(o.a)(a,2),c=r[0],l=e(r[1],n?"".concat(n).concat(Object(le.b)(c)):c);return l?t+l:t}),""):se.test(n)?"--".concat(n,":").concat(t,";"):void 0}(ue),"}"),me=function(){var e=ie(fe),t=e.update,n=e.handleClose;return r.a.createElement(l.b,{injectFirst:!0},r.a.createElement(i.a,{theme:ue},r.a.createElement(s.a,null),r.a.createElement(u.a,{onClose:n,open:!!t},r.a.createElement(f.a,null,"Nueva versi\xf3n disponible"),r.a.createElement(m.a,null,r.a.createElement(d.a,null,'Pulsa "Actualizar" para aplicar los cambios')),r.a.createElement(v.a,null,r.a.createElement(b.a,{onClick:n,color:"secondary"},"Cancelar"),r.a.createElement(b.a,{onClick:n,"data-confirm":!0,color:"primary"},"Actualizar"))),r.a.createElement(oe,null)))},de=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ve(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var be=document.getElementById("root");if(be.hasChildNodes()){var ge=Array.from(document.getElementsByTagName("style"));Object(c.hydrate)(r.a.createElement(me,null),be,(function(){return ge.forEach((function(e){return e.remove()}))})),function(e){if("serviceWorker"in navigator){if(new URL("/pokemon",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/pokemon","/service-worker.js");de?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ve(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ve(t,e)}))}}({onUpdate:function(e){window.dispatchEvent(new CustomEvent("update",{detail:e.waiting}))}})}else Object(c.render)(r.a.createElement(me,null),be)}},[[62,3,4]]]);
//# sourceMappingURL=main.82bd7839.chunk.js.map