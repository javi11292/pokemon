{"version":3,"sources":["images/characters.png","images/world.png","images/data/world.xml","maps lazy /^/.//.*/.xml$/ groupOptions: {} namespace object","libraries/database.js","images/data/characters.js","game/Character.js","game/World.js","game/index.js","game/Player.js"],"names":["module","exports","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","t","keys","Object","playerDB","localForage","createInstance","storeName","CHARACTERS","PLAYER","getFrame","x","y","Math","floor","w","h","STATES","getTextures","spriteSheet","key","data","animations","texture","textures","rotate","frames","createCharacter","game","database","name","position","newX","setItem","newY","createPosition","character","still","nextState","face","walk","direction","sprite","state","CONTROLS","DOWN","speed","nextDirection","nextTile","newPosition","stillDown","stillUp","stillLeft","stillRight","walkDown","walkUp","walkLeft","walkRight","updatePosition","dimension","move","SPEED","SIZE","updateState","location","layer","split","world","setLocation","Loader","add","load","loader","resources","Spritesheet","characters","meta","frame","groupD8","MIRROR_HORIZONTAL","walkDown0","walkDown1","walkUp0","walkUp1","getData","toUpperCase","parse","AnimatedSprite","upperCase","width","height","animationSpeed","app","screen","stage","addChild","ticker","speedX","RIGHT","LEFT","speedY","UP","nextX","nextY","tileAt","updateNextTile","collision","play","updateTextures","loadTexture","worldTexture","addGraphic","tileX","tileY","object","tileSize","graphics","Graphics","beginTextureFill","drawRect","scale","prepareGame","view","utils","skipHello","settings","SCALE_MODE","SCALE_MODES","NEAREST","Application","renderer","plugins","accessibility","destroy","accesibility","player","characterWalk","characterFace","characterStill","clearTimeout","faceTimeout","setTimeout","createPlayer","update","camera","children","length","getChildAt","getChildByName","loadMapLocation","newLocation","newLayer","Container","pivot","a","all","parseData","worldData","enableControls","locationMap","url","default","parseMap","layers","columns","value","objects","forEach","row","i","j","parseInt","removeChildren","addChildAt","createWorld","createGame","handleAction","detail","action","setMessage","getItem","save","loadText","window","addEventListener"],"mappings":"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","file":"static/js/4.9e9aee79.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/characters.111f6faf.png\";","module.exports = __webpack_public_path__ + \"static/media/world.74af39e9.png\";","module.exports = __webpack_public_path__ + \"static/media/world.db6fb586.xml\";","var map = {\n\t\"./PalletTown.xml\": [\n\t\t145,\n\t\t5\n\t],\n\t\"./PalletTownRooms.xml\": [\n\t\t146,\n\t\t6\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 144;\nmodule.exports = webpackAsyncContext;","import localForage from \"localforage\"\n\nexport const playerDB = localForage.createInstance({ storeName: \"player\" })","import { groupD8 } from \"pixi.js\"\n\nconst SIZE = 16\nconst COLUMNS = 8\nconst ROTATE = \"rotate\"\n\nexport const CHARACTERS = {\n  PLAYER: [6, 14]\n}\n\nfunction getFrame(id) {\n  return {\n    x: (id % COLUMNS) * SIZE,\n    y: (Math.floor(id / COLUMNS)) * SIZE,\n    w: SIZE,\n    h: SIZE,\n  }\n}\n\nexport function getData([x, y]) {\n  const id = y * COLUMNS + x\n\n  return {\n    meta: {},\n    frames: {\n      stillDown: {\n        frame: getFrame(id),\n      },\n      stillUp: {\n        frame: getFrame(id + 1),\n      },\n      stillLeft: {\n        frame: getFrame(id + 2),\n      },\n      stillRight: {\n        frame: getFrame(id + 2),\n        [ROTATE]: groupD8.MIRROR_HORIZONTAL,\n      },\n\n      walkDown0: {\n        frame: getFrame(id + 3)\n      },\n      walkDown1: {\n        frame: getFrame(id + 3),\n        [ROTATE]: groupD8.MIRROR_HORIZONTAL,\n      },\n\n      walkUp0: {\n        frame: getFrame(id + 4),\n      },\n      walkUp1: {\n        frame: getFrame(id + 4),\n        [ROTATE]: groupD8.MIRROR_HORIZONTAL,\n      },\n\n      walkLeft: {\n        frame: getFrame(id + 5),\n      },\n\n      walkRight: {\n        frame: getFrame(id + 5),\n        [ROTATE]: groupD8.MIRROR_HORIZONTAL,\n      },\n    },\n\n    animations: {\n      walkDown: [\"walkDown0\", \"stillDown\", \"walkDown1\", \"stillDown\"],\n      walkUp: [\"walkUp0\", \"stillUp\", \"walkUp1\", \"stillUp\"],\n      walkLeft: [\"walkLeft\", \"stillLeft\"],\n      walkRight: [\"walkRight\", \"stillRight\"],\n    },\n  }\n}","import { Spritesheet, AnimatedSprite, Loader } from \"pixi.js\"\nimport localForage from \"localforage\"\nimport { getData, CHARACTERS } from \"images/data/characters\"\nimport texture from \"images/characters.png\"\nimport { upperCase } from \"libraries/util\"\nimport { CONTROLS, SIZE, SPEED } from \"libraries/constants\"\n\nexport const STATES = {\n  STILL: \"still\",\n  WALK: \"walk\",\n}\n\nfunction getTextures(spriteSheet, key) {\n  return spriteSheet.data.animations[key].map(id => {\n    const texture = spriteSheet.textures[id]\n    texture.rotate = spriteSheet.data.frames[id].rotate ?? texture.rotate\n    return texture\n  })\n}\n\nfunction createPosition(database) {\n  let x = 0\n  let y = 0\n  const position = {\n    get x() {\n      return x\n    },\n    set x(newX) {\n      x = newX\n      database.setItem(\"position\", { ...position, x })\n    },\n    get y() {\n      return y\n    },\n    set y(newY) {\n      y = newY\n      database.setItem(\"position\", { ...position, y })\n    }\n  }\n\n  return position\n}\n\nexport function createCharacter(game, id) {\n  const database = localForage.createInstance({ name: id })\n  const position = createPosition(database)\n\n  const character = {\n    game,\n    still,\n    face,\n    walk,\n    sprite: null,\n    state: STATES.STILL,\n    direction: CONTROLS.DOWN,\n    speed: { x: 0, y: 0 },\n    nextDirection: null,\n    nextState: null,\n    nextTile: { data: {} },\n    get position() {\n      return position\n    },\n    set position(newPosition) {\n      position.x = newPosition.x\n      position.y = newPosition.y\n      database.setItem(\"position\", newPosition)\n    },\n    textures: {\n      stillDown: [],\n      stillUp: [],\n      stillLeft: [],\n      stillRight: [],\n      walkDown: [],\n      walkUp: [],\n      walkLeft: [],\n      walkRight: [],\n    },\n  }\n\n  function still() {\n    character.nextState = STATES.STILL\n  }\n\n  function face(direction) {\n    character.nextDirection = direction\n  }\n\n  function walk(direction) {\n    face(direction)\n    character.nextState = STATES.WALK\n  }\n\n  function update() {\n    const speedX = character.direction === CONTROLS.RIGHT ? 1 : character.direction === CONTROLS.LEFT ? -1 : 0\n    const speedY = character.direction === CONTROLS.DOWN ? 1 : character.direction === CONTROLS.UP ? -1 : 0\n\n    if (character.state === STATES.WALK && !character.speed.x && !character.speed.y) updateNextTile(speedX, speedY)\n\n    if (character.state === STATES.WALK && !character.speed.x && !character.speed.y && character.nextTile.data.collision === \"false\") {\n      character.speed.x = speedX\n      character.speed.y = speedY\n      updatePosition(character.speed.x ? \"x\" : \"y\", true)\n    } else if (character.speed.x || character.speed.y) {\n      updatePosition(character.speed.x ? \"x\" : \"y\")\n    } else {\n      updateState()\n    }\n\n    updateTextures()\n  }\n\n  function updateNextTile(speedX, speedY) {\n    const nextX = Math.floor(character.position.x / SIZE + speedX)\n    const nextY = Math.floor(character.position.y / SIZE + speedY)\n\n    if (character.nextTile.x === nextX && character.nextTile.y === nextY) return\n\n    character.nextTile = {\n      x: nextX,\n      y: nextY,\n      data: character.game.world.tileAt(nextX, nextY),\n    }\n  }\n\n  function updatePosition(dimension, move) {\n    if (!character.speed[dimension]) return\n\n    const speed = character.speed[dimension] * SPEED\n    const remainder = character.position[dimension] % SIZE\n\n    if (remainder || move) {\n      character.position[dimension] += speed\n    } else {\n      character.speed[dimension] = 0\n      updateState()\n\n      const { data } = character.nextTile\n      if (data.location || data.layer) {\n        const [x, y] = data.position.split(\",\")\n        character.game.world.setLocation(data.location, data.layer, { x: x * SIZE, y: y * SIZE + SIZE })\n      }\n    }\n  }\n\n  function updateState() {\n    if (character.nextDirection) {\n      character.direction = character.nextDirection\n      character.nextDirection = null\n    }\n    if (character.nextState) {\n      character.state = character.nextState\n      character.nextState = null\n    }\n  }\n\n  function updateTextures() {\n    if (!character.sprite) return\n    const textures = character.textures[character.state + upperCase(character.direction)]\n    if (!textures || character.sprite.textures === textures) return\n    character.sprite.textures = textures\n    character.sprite.play()\n  }\n\n  function addSpriteSheet() {\n    new Loader().add(\"characters\", texture).load((loader, resources) => {\n      const spriteSheet = new Spritesheet(resources.characters.texture, getData(CHARACTERS[id.toUpperCase()]))\n\n      spriteSheet.parse(() => {\n        character.textures.stillDown = [spriteSheet.textures.stillDown]\n        character.textures.stillUp = [spriteSheet.textures.stillUp]\n        character.textures.stillLeft = [spriteSheet.textures.stillLeft]\n        character.textures.stillRight = [spriteSheet.textures.stillRight]\n\n        character.textures.walkDown = getTextures(spriteSheet, \"walkDown\")\n        character.textures.walkUp = getTextures(spriteSheet, \"walkUp\")\n        character.textures.walkLeft = getTextures(spriteSheet, \"walkLeft\")\n        character.textures.walkRight = getTextures(spriteSheet, \"walkRight\")\n\n        const sprite = new AnimatedSprite(character.textures[character.state + upperCase(character.direction)])\n\n        sprite.width = SIZE\n        sprite.height = SIZE\n        sprite.animationSpeed = 0.1\n        sprite.x = character.game.app.screen.width / 2 - sprite.width / 2\n        sprite.y = character.game.app.screen.height / 2 - sprite.height / 2\n        character.sprite = sprite\n\n        character.game.app.stage.addChild(sprite)\n      })\n    })\n  }\n\n  addSpriteSheet()\n\n  character.game.app.ticker.add(update)\n\n  return character\n}","import { Graphics, Loader, Container } from \"pixi.js\"\nimport worldTexture from \"images/world.png\"\nimport worldData from \"images/data/world.xml\"\nimport { SIZE } from \"libraries/constants\"\nimport { parseData, parseMap } from \"libraries/util\"\nimport { playerDB } from \"libraries/database\"\n\nfunction loadTexture() {\n  return new Promise(resolve => {\n    new Loader().add(\"world\", worldTexture).load((loader, resources) => {\n      resolve(resources.world.texture)\n    })\n  })\n}\n\nfunction addGraphic({ texture, map, tileX, tileY, x, y, object, tileSize }) {\n  const graphics = new Graphics()\n  graphics.name = `${x}-${y}`\n  graphics.data = object\n\n  graphics.beginTextureFill({ texture })\n  graphics.drawRect(tileX, tileY, tileSize, tileSize)\n\n  graphics.width = SIZE\n  graphics.height = SIZE\n\n  graphics.x = -tileX * graphics.scale.x + x * SIZE\n  graphics.y = -tileY * graphics.scale.y + y * SIZE\n\n  map.addChild(graphics)\n}\n\nexport function createWorld(game) {\n  let location = null\n  let layer = null\n\n  const world = {\n    game,\n    update,\n    tileAt,\n    setLocation,\n    load,\n    get location() {\n      return location\n    },\n    set location(newLocation) {\n      location = newLocation\n      playerDB.setItem(\"location\", newLocation)\n    },\n    get layer() {\n      return layer\n    },\n    set layer(newLayer) {\n      layer = newLayer\n      playerDB.setItem(\"layer\", newLayer)\n    },\n    texture: null,\n    data: null,\n    map: {},\n    camera: new Container(),\n  }\n\n  function setLocation(location, layer, position) {\n    world.location = location || world.location\n    world.layer = layer || \"index\"\n    playerDB.setItem(\"location\", world.location)\n    playerDB.setItem(\"layer\", world.layer)\n    loadMapLocation(position)\n  }\n\n  function update() {\n    const position = world.game.player.position\n    world.camera.pivot.x = -world.game.player.sprite?.x\n    world.camera.pivot.y = -world.game.player.sprite?.y\n    world.camera.position.x = -position.x\n    world.camera.position.y = -position.y\n  }\n\n  async function load() {\n    const [texture, data] = await Promise.all([loadTexture(), parseData(worldData)])\n    world.texture = texture\n    world.data = data\n    await loadMapLocation()\n    world.game.enableControls = true\n  }\n\n  async function loadMapLocation(position) {\n    const { location, layer } = world\n    let locationMap = world.map[location + layer]\n\n    if (!locationMap) {\n      locationMap = new Container()\n      const { default: url } = await import(`maps/${location}.xml`)\n      const layers = await parseMap(url)\n      const { tileSize, columns } = world.data\n      const { value: map, objects } = layers[layer]\n\n      map.split(\"\\n\").forEach((row, i) => row.split(\",\").forEach((value, j) => {\n        if (!value || value === \"0\") return\n        const id = parseInt(value, 10) - 1\n        const object = world.data[id] || {}\n        const tileX = (id % columns) * tileSize\n        const tileY = Math.floor(id / columns) * tileSize\n\n        addGraphic({\n          texture: world.texture,\n          map: locationMap,\n          tileX,\n          tileY,\n          x: j,\n          y: i,\n          tileSize,\n          object,\n        })\n      }))\n\n      objects.forEach(object => {\n        const id = parseInt(object.id, 10) - 1\n        const tileX = (id % columns) * tileSize\n        const tileY = Math.floor(id / columns) * tileSize\n\n        addGraphic({\n          texture: world.texture,\n          map: locationMap,\n          tileX,\n          tileY,\n          x: object.x / tileSize,\n          y: object.y / tileSize,\n          tileSize,\n          object: { ...(world.data[id] || {}), ...object },\n        })\n      })\n\n      world.map[location + layer] = locationMap\n    }\n\n    world.camera.removeChildren()\n    world.camera.addChild(locationMap)\n    if (position) world.game.player.position = position\n  }\n\n  function tileAt(x, y) {\n    if (!world.camera.children.length) return {}\n    return world.camera.getChildAt(0).getChildByName(`${x}-${y}`)?.data || {}\n  }\n\n  game.app.stage.addChildAt(world.camera, 0)\n\n  game.app.ticker.add(update)\n\n  return world\n}","import { Application, utils, settings, SCALE_MODES } from \"pixi.js\"\nimport { CONTROLS, SIZE } from \"libraries/constants\"\nimport { playerDB } from \"libraries/database\"\nimport { loadText } from \"libraries/util\"\nimport { createPlayer } from \"./Player\"\nimport { createWorld } from \"./World\"\n\nfunction prepareGame(game, view) {\n  utils.skipHello()\n  settings.SCALE_MODE = SCALE_MODES.NEAREST\n\n  game.app = new Application({\n    view,\n    width: 1920,\n    height: 1080,\n  })\n\n  game.app.renderer.plugins.accessibility.destroy()\n  delete game.app.renderer.plugins.accesibility\n\n  game.player = createPlayer(game)\n  game.world = createWorld(game)\n}\n\nexport async function createGame({ view, setMessage }) {\n  const game = {\n    setMessage,\n    app: null,\n    action: null,\n    player: null,\n    world: null,\n    enableControls: false,\n  }\n\n  const save = {\n    position: await playerDB.getItem(\"position\"),\n    location: await playerDB.getItem(\"location\"),\n    layer: await playerDB.getItem(\"layer\"),\n  }\n\n  prepareGame(game, view)\n\n  if (!save.position) {\n    loadText(\"welcome\", setMessage)\n    game.player.position = { x: SIZE * 3, y: SIZE * 7 }\n    game.world.location = \"PalletTownRooms\"\n    game.world.layer = \"house1 f2\"\n  } else {\n    game.player.position = save.position\n    game.world.location = save.location\n    game.world.layer = save.layer\n  }\n\n  game.world.load()\n\n  function handleAction({ detail }) {\n    if (!game.enableControls) return\n    game.action = detail\n\n    switch (game.action) {\n      case CONTROLS.UP:\n      case CONTROLS.LEFT:\n      case CONTROLS.RIGHT:\n      case CONTROLS.DOWN: {\n        game.player.walk(game.action)\n        break\n      }\n\n      default: {\n        game.player.still()\n      }\n    }\n  }\n\n  window.addEventListener(\"action\", handleAction)\n}","import { createCharacter, STATES } from \"./Character\"\n\nexport function createPlayer(game) {\n  const player = createCharacter(game, \"player\")\n  const { walk: characterWalk, face: characterFace, still: characterStill } = player\n  player.still = still\n  player.face = face\n  player.walk = walk\n\n  let faceTimeout = null\n\n  function still() {\n    characterStill()\n    clearTimeout(faceTimeout)\n  }\n\n  function face(direction) {\n    characterFace(direction)\n    faceTimeout = setTimeout(() => walk(direction), 1)\n  }\n\n  function walk(direction) {\n    if (player.direction !== direction && player.state !== STATES.WALK) face(direction)\n    else characterWalk(direction)\n  }\n\n  return player\n}"],"sourceRoot":""}