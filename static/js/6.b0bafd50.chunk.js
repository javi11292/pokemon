(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[6],{109:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return l}));var a=n(114),r=n.n(a),i=n(7),o=r.a.createInstance({name:i.a.PLAYER});function l(t){return r.a.createInstance({name:"events",storeName:t})}},129:function(t,e,n){t.exports=n.p+"static/media/characters.111f6faf.png"},130:function(t,e,n){t.exports=n.p+"static/media/world.74af39e9.png"},131:function(t){t.exports=JSON.parse('{"columns":38,"image":"../world.png","imageheight":656,"imagewidth":608,"margin":0,"name":"world","spacing":0,"tilecount":1558,"tiledversion":"1.3.3","tileheight":16,"tiles":[{"id":0,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":2,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":38,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":40,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":231,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":646,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":656,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":690,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":804,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":842,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":1064,"properties":[{"name":"collision","type":"bool","value":false}]},{"id":1102,"properties":[{"name":"collision","type":"bool","value":false}]}],"tilewidth":16,"type":"tileset","version":1.2}')},132:function(t,e,n){var a={"./PalletTown":[107,9,0],"./PalletTown/":[107,9,0],"./PalletTown/index":[107,9,0],"./PalletTown/index.js":[107,9,0],"./welcome.txt":[77,7,1]};function r(t){if(!n.o(a,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=a[t],r=e[0];return n.e(e[2]).then((function(){return n.t(r,e[1])}))}r.keys=function(){return Object.keys(a)},r.id=132,t.exports=r},133:function(t,e,n){var a={"./PalletTown.json":[134,7],"./PalletTownRooms.json":[135,8]};function r(t){if(!n.o(a,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=a[t],r=e[0];return n.e(e[1]).then((function(){return n.t(r,3)}))}r.keys=function(){return Object.keys(a)},r.id=133,t.exports=r},136:function(t,e,n){"use strict";n.r(e),n.d(e,"createGame",(function(){return z}));var a=n(38),r=n.n(a),i=n(40),o=n(111),l=n(7),s=n(109),c=n(42),u=n(14),p=n(115),f=n(110),d=n(114),w=n.n(d),x=n(129),m=n.n(x),h="still",y="walk";function b(t,e,n,a,r){return v.apply(this,arguments)}function v(){return(v=Object(i.a)(r.a.mark((function t(e,n,a,s,u){var p,f,d,x,m,b,v,g,j,D,U,S,M,E,N,P,C;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(C=function(){return(C=Object(i.a)(r.a.mark((function t(a,i){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.world.events[n]["".concat(a,"-").concat(i)](d.game);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)},P=function(t,e){return C.apply(this,arguments)},N=function(){var t=new o.g(I.characters.texture,T(n));t.parse((function(){d.textures.stillDown=[t.textures["stillDown"+n]],d.textures.stillUp=[t.textures["stillUp"+n]],d.textures.stillLeft=[t.textures["stillLeft"+n]],d.textures.stillRight=[t.textures["stillRight"+n]],d.textures.walkDown=R(t,"walkDown"),d.textures.walkUp=R(t,"walkUp"),d.textures.walkLeft=R(t,"walkLeft"),d.textures.walkRight=R(t,"walkRight");var e=new o.a(d.textures[d.state+Object(c.b)(d.direction)]);e.width=l.c,e.height=l.c,e.animationSpeed=.1,e.x=s,e.y=u,d.sprite=e,a.addChild(e)}))},E=function(){if(d.sprite){var t=d.textures[d.state+Object(c.b)(d.direction)];t&&d.sprite.textures!==t&&(d.sprite.textures=t,d.sprite.play())}},M=function(){d.nextDirection&&(d.direction=d.nextDirection,d.nextDirection=null),d.nextState&&(d.state=d.nextState,d.nextState=null)},S=function(t,e){if(d.speed[t]){var n=d.speed[t]*l.d;f[t]%l.c||e?f[t]+=n:(d.speed[t]=0,d.updateState())}},U=function(){return(U=Object(i.a)(r.a.mark((function t(e,a){var i,o,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Math.floor(f.x/l.c+e),o=Math.floor(f.y/l.c+a),d.nextTile.x!==i||d.nextTile.y!==o){t.next=4;break}return t.abrupt("return");case 4:if(s=d.game.world.tileAt(i,o),d.nextTile={x:i,y:o,data:s},s.event!==n.toString()){t.next=9;break}return t.next=9,P(i,o);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)},D=function(t,e){return U.apply(this,arguments)},j=function(){d.sprite.x=f.x,d.sprite.y=f.y},g=function(){return(g=Object(i.a)(r.a.mark((function t(){var e,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=d.direction===l.b.RIGHT?1:d.direction===l.b.LEFT?-1:0,n=d.direction===l.b.DOWN?1:d.direction===l.b.UP?-1:0,d.state!==y||d.speed.x||d.speed.y){t.next=5;break}return t.next=5,D(e,n);case 5:d.state!==y||d.speed.x||d.speed.y||!1!==d.nextTile.data.collision?d.speed.x||d.speed.y?S(d.speed.x?"x":"y"):M():(d.speed.x=e,d.speed.y=n,S(d.speed.x?"x":"y",!0)),E(),d.postUpdate&&d.postUpdate();case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)},v=function(){return g.apply(this,arguments)},b=function(t){m(t),d.nextState=y},m=function(t){d.nextDirection=t},x=function(){d.nextState=h},I||L){t.next=18;break}return t.next=17,k();case 17:L=t.sent;case 18:return p=w.a.createInstance({name:n}),t.next=21,O(p,s,u);case 21:return f=t.sent,t.t0=p,t.t1=e,t.t2=x,t.t3=m,t.t4=b,t.t5=M,t.t6=j,t.t7=h,t.t8=l.b.DOWN,t.t9={x:0,y:0},t.t10={data:{}},t.t11={stillDown:[],stillUp:[],stillLeft:[],stillRight:[],walkDown:[],walkUp:[],walkLeft:[],walkRight:[]},d={database:t.t0,game:t.t1,still:t.t2,face:t.t3,walk:t.t4,updateState:t.t5,postUpdate:t.t6,sprite:null,state:t.t7,direction:t.t8,speed:t.t9,nextDirection:null,nextState:null,nextTile:t.t10,get position(){return f},set position(t){f.x=t.x,f.y=t.y},textures:t.t11},N(),d.game.app.ticker.add(v),t.abrupt("return",d);case 38:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(){return g.apply(this,arguments)}function g(){return(g=Object(i.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){(new o.e).add("characters",m.a).load((function(e,n){I=n,t()}))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(t,e,n){return j.apply(this,arguments)}function j(){return(j=Object(i.a)(r.a.mark((function t(e,n,a){var i,o,l,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getItem("position");case 2:return i=t.sent,o=(null===i||void 0===i?void 0:i.x)||n,l=(null===i||void 0===i?void 0:i.y)||a,s={get x(){return o},set x(t){o=t,e.setItem("position",Object(p.a)({},s,{x:o}))},get y(){return l},set y(t){l=t,e.setItem("position",Object(p.a)({},s,{y:l}))}},t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(t,e){return t.data.animations[e].map((function(e){var n,a=t.textures[e];return a.rotate=null!==(n=t.data.frames[e].rotate)&&void 0!==n?n:a.rotate,a}))}function T(t){var e;return{meta:{},frames:(e={},Object(f.a)(e,"stillDown"+t,{frame:D(t)}),Object(f.a)(e,"stillUp"+t,{frame:D(t+1)}),Object(f.a)(e,"stillLeft"+t,{frame:D(t+2)}),Object(f.a)(e,"stillRight"+t,Object(f.a)({frame:D(t+2)},"rotate",o.i.MIRROR_HORIZONTAL)),Object(f.a)(e,"walkDown0"+t,{frame:D(t+3)}),Object(f.a)(e,"walkDown1"+t,Object(f.a)({frame:D(t+3)},"rotate",o.i.MIRROR_HORIZONTAL)),Object(f.a)(e,"walkUp0"+t,{frame:D(t+4)}),Object(f.a)(e,"walkUp1"+t,Object(f.a)({frame:D(t+4)},"rotate",o.i.MIRROR_HORIZONTAL)),Object(f.a)(e,"walkLeft"+t,{frame:D(t+5)}),Object(f.a)(e,"walkRight"+t,Object(f.a)({frame:D(t+5)},"rotate",o.i.MIRROR_HORIZONTAL)),e),animations:{walkDown:["walkDown0"+t,"stillDown"+t,"walkDown1"+t,"stillDown"+t],walkUp:["walkUp0"+t,"stillUp"+t,"walkUp1"+t,"stillUp"+t],walkLeft:["walkLeft"+t,"stillLeft"+t],walkRight:["walkRight"+t,"stillRight"+t]}}}function D(t){return{x:t%8*16,y:16*Math.floor(t/8),w:16,h:16}}var I=null,L=null;function U(t){return S.apply(this,arguments)}function S(){return(S=Object(i.a)(r.a.mark((function t(e){var n,a,i,o,s,c,p,f,d,w;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=function(){d();var t=n.nextTile.data;if(t.location||t.layer){var a=t.position.split(","),r=Object(u.a)(a,2),i=r[0],o=r[1];e.world.setLocation(t.location,t.layer,{x:i*l.c,y:o*l.c})}},o=function(t){n.direction!==t&&n.state!==y?i(t):c(t)},i=function(t){p(t),w=setTimeout((function(){return o(t)}),50)},a=function(){f(),clearTimeout(w)},t.next=6,b(e,l.a.PLAYER,e.app.stage,e.app.screen.width/2-l.c/2,e.app.screen.height/2-l.c/2);case 6:return n=t.sent,c=n.walk,p=n.face,f=n.still,d=n.updateState,n.still=a,n.face=i,n.walk=o,n.updateState=s,n.postUpdate=null,w=null,t.abrupt("return",n);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var M=n(130),E=n.n(M),N=n(131);function P(t){return C.apply(this,arguments)}function C(){return(C=Object(i.a)(r.a.mark((function t(e){var a,c,u,f,d,w,x,m,h,y,v,k;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y=function(t){var e=t.item,n=t.tilesets,o=t.locationTiles,s=t.locationCharacters,c=t.locationMap,u=t.promises,f=a.data,d=f.tileSize,w=f.columns;e.objects.forEach(function(){var t=Object(i.a)(r.a.mark((function t(e){var i,f,x,m,h,y,v,k,g,O;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.gid,n[1]&&!(i<n[1].firstgid)){t.next=11;break}f=i-n[0].firstgid,x=f%w*d,m=Math.floor(f/w)*d,h=e.x/d,y=e.y/d-1,o["".concat(h,"-").concat(y)]=Object(p.a)({},a.data.tiles[f]||{},{},e.properties.reduce(H,{})),_({texture:a.texture,map:c,tileX:x,tileY:m,x:h,y:y,tileSize:d}),t.next=20;break;case 11:return v=i-n[1].firstgid,k=b(a.game,v,c,l.c*e.x/d,l.c*(e.y/d-1)),u.push(k),g=e.properties.reduce(H,{}),t.next=17,k;case 17:(O=t.sent).sprite.visible=!1!==g.visible,s.push(O);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},h=function(t){var e=t.item,n=t.tilesets,r=t.locationTiles,i=t.locationMap,o=t.width,l=a.data,s=l.tileSize,c=l.columns;e.data.forEach((function(t,e){if(t){var l=parseInt(t,10)-n[0].firstgid,u=a.data.tiles[l]||{},p=e%o,f=Math.floor(e/o),d=l%c*s,w=Math.floor(l/c)*s;r["".concat(p,"-").concat(f)]=u,_({texture:a.texture,map:i,tileX:d,tileY:w,x:p,y:f,tileSize:s})}}))},m=function(t,e){return a.tiles[v+k]&&a.tiles[v+k]["".concat(t,"-").concat(e)]||{}},x=function(){return(x=Object(i.a)(r.a.mark((function t(e){var i,l,s,c,u,p,f,d,w,x,m,b,v;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n(132)("./".concat(a.location,"/").concat(a.layer)).catch((function(){return{default:{}}})),l=a.location,s=a.layer,c=a.map[l+s],u=a.tiles[l+s],p=a.characters[l+s],c){t.next=22;break}return c=new o.c,u={},p=[],t.next=11,n(133)("./".concat(l,".json"));case 11:return f=t.sent,d=f.layers,w=f.tilesets,x=f.width,m=[],d.forEach((function(t){t.name===s&&("tilelayer"===t.type&&h({item:t,tilesets:w,locationTiles:u,locationMap:c,width:x}),"objectgroup"===t.type&&y({item:t,tilesets:w,locationTiles:u,locationCharacters:p,locationMap:c,promises:m}))})),t.next=19,Promise.all(m);case 19:a.map[l+s]=c,a.tiles[l+s]=u,a.characters[l+s]=p;case 22:return t.next=24,i;case 24:b=t.sent,v=b.default,a.events=v,a.camera.removeChildren(),a.camera.addChild(c),e&&(a.game.player.position=e);case 30:case"end":return t.stop()}}),t)})))).apply(this,arguments)},w=function(t){return x.apply(this,arguments)},d=function(){return(d=Object(i.a)(r.a.mark((function t(){var e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A();case 2:return e=t.sent,a.texture=e,a.data={tileSize:N.tilewidth,columns:N.columns,tiles:N.tiles.reduce((function(t,e){return t[e.id]=e.properties.reduce(H,{}),t}),{})},t.next=7,w();case 7:a.game.enableControls=!0;case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)},f=function(){return d.apply(this,arguments)},u=function(t,e,n){a.location=t||a.location,a.layer=e||"index",s.b.setItem("location",a.location),s.b.setItem("layer",a.layer),w(n)},c=function(){var t,e,n=a.game.player.position;a.camera.pivot.x=-(null===(t=a.game.player.sprite)||void 0===t?void 0:t.x),a.camera.pivot.y=-(null===(e=a.game.player.sprite)||void 0===e?void 0:e.y),a.camera.position.x=-n.x,a.camera.position.y=-n.y},t.t0=e,t.t1=c,t.t2=m,t.t3=u,t.t4=f,t.t5={},t.t6={},t.t7={},t.t8=new o.c,a={game:t.t0,update:t.t1,tileAt:t.t2,setLocation:t.t3,load:t.t4,events:null,get location(){return v},set location(t){v=t,s.b.setItem("location",t)},get layer(){return k},set layer(t){k=t,s.b.setItem("layer",t)},texture:null,data:null,map:t.t5,tiles:t.t6,characters:t.t7,camera:t.t8},e.app.stage.addChildAt(a.camera,0),e.app.ticker.add(c,null,o.h.INTERACTION),v=null,k=null,t.abrupt("return",a);case 24:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(){return new Promise((function(t){(new o.e).add("world",E.a).load((function(e,n){t(n.world.texture)}))}))}function _(t){var e=t.texture,n=t.map,a=t.tileX,r=t.tileY,i=t.x,s=t.y,c=t.tileSize,u=new o.d;u.beginTextureFill({texture:e}),u.drawRect(a,r,c,c),u.width=l.c,u.height=l.c,u.x=-a*u.scale.x+i*l.c,u.y=-r*u.scale.y+s*l.c,n.addChild(u)}function H(t,e){return t[e.name]=e.value,t}function z(t){return F.apply(this,arguments)}function F(){return(F=Object(i.a)(r.a.mark((function t(e){var n,a,i,o,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=function(t){var e=t.detail;switch(i.enableControls?i.action=e:i.action=null,i.action){case l.b.UP:case l.b.LEFT:case l.b.RIGHT:case l.b.DOWN:i.player.walk(i.action);break;default:i.player.still()}},n=e.view,a=e.setMessage,i={setMessage:a,app:null,action:null,player:null,world:null,enableControls:!1},t.next=5,s.b.getItem("position");case 5:return t.t0=t.sent,t.next=8,s.b.getItem("location");case 8:return t.t1=t.sent,t.next=11,s.b.getItem("layer");case 11:return t.t2=t.sent,u={position:t.t0,location:t.t1,layer:t.t2},t.next=15,Y(i,n);case 15:u.position?(i.world.location=u.location,i.world.layer=u.layer):(Object(c.a)("welcome",a),i.player.position={x:3*l.c,y:6*l.c},i.world.location="PalletTownRooms",i.world.layer="house1 f2"),i.world.load(),window.addEventListener("action",o);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Y(t,e){return Z.apply(this,arguments)}function Z(){return(Z=Object(i.a)(r.a.mark((function t(e,n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.k.skipHello(),o.j.SCALE_MODE=o.f.NEAREST,e.app=new o.b({view:n,width:1920,height:1080}),e.app.renderer.plugins.accessibility.destroy(),delete e.app.renderer.plugins.accesibility,t.next=7,U(e);case 7:return e.player=t.sent,t.next=10,P(e);case 10:e.world=t.sent;case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=6.b0bafd50.chunk.js.map